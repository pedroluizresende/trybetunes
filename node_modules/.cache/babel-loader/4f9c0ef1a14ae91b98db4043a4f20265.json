{"ast":null,"code":"var _jsxFileName = \"/home/pedroresende/projetos/trybe/frontend/sd-026-b-project-trybetunes/src/pages/ProfileEdit.jsx\";\nimport React, { Component } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport Header from '../components/Header';\nimport { getUser, updateUser } from '../services/userAPI';\nimport Loading from './Loading';\nimport styles from './ProfileEdit.module.css';\nimport emptyUserPhoto from '../images/emptyUserPhoto.webp';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass ProfileEdit extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      userName: '',\n      userEmail: '',\n      userImage: '',\n      userDescription: '',\n      requestIsDone: true,\n      isDisableButton: true,\n      isSalved: false\n    };\n\n    this.fetchUser = async () => {\n      this.setState({\n        requestIsDone: false\n      });\n      const user = await getUser();\n      this.setState({\n        userName: user.name,\n        userEmail: user.email,\n        userImage: user.image,\n        userDescription: user.description,\n        requestIsDone: true\n      }, () => {\n        this.validateButton();\n      });\n    };\n\n    this.validateEmail = email => {\n      const re = /\\S+@\\S+\\.\\S+/;\n      return re.test(email);\n    };\n\n    this.validateButton = () => {\n      const {\n        userEmail,\n        userName,\n        userDescription,\n        userImage\n      } = this.state;\n      const isValidEmail = this.validateEmail(userEmail);\n      const isValid = userName.length > 0 && userEmail.length > 0 && userDescription.length > 0 && userImage.length > 0;\n\n      if (isValid && isValidEmail) {\n        this.setState({\n          isDisableButton: false\n        });\n      }\n    };\n\n    this.salverUser = async () => {\n      const {\n        userName,\n        userEmail,\n        userImage,\n        userDescription\n      } = this.state;\n      const userInfo = {\n        name: userName,\n        email: userEmail,\n        image: userImage,\n        description: userDescription\n      };\n      this.setState({\n        requestIsDone: false\n      });\n      await updateUser(userInfo);\n      this.setState({\n        isSalved: true,\n        requestIsDone: true\n      });\n    };\n\n    this.handleChange = _ref => {\n      let {\n        target\n      } = _ref;\n      console.log(target.value);\n      const {\n        name,\n        value\n      } = target;\n      this.setState({\n        [name]: value\n      }, () => {\n        this.validateButton();\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.fetchUser();\n  }\n\n  render() {\n    const {\n      userName,\n      userEmail,\n      userImage,\n      userDescription,\n      requestIsDone,\n      isDisableButton,\n      isSalved\n    } = this.state;\n\n    const editForm = /*#__PURE__*/_jsxDEV(\"form\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.imageSection,\n        children: [userImage === '' ? /*#__PURE__*/_jsxDEV(\"img\", {\n          className: styles.userImage,\n          src: emptyUserPhoto,\n          alt: \"Foto de Perfil\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 17\n        }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n          className: styles.userImage,\n          src: userImage,\n          alt: \"Foto de Perfil\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"userImage\",\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            className: styles.imageInput,\n            type: \"text\",\n            name: \"userImage\",\n            placeholder: \"Insira um link\",\n            id: \"username\",\n            \"data-testid\": \"edit-input-image\",\n            value: userImage,\n            alt: \"Foto de Perfil\",\n            onChange: this.handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"userName\",\n          children: [\"Nome:\", /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"userName\",\n            id: \"userName\",\n            type: \"name\",\n            \"data-testid\": \"edit-input-name\",\n            value: userName,\n            onChange: this.handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"userEmail\",\n          children: [\"Email:\", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"email\",\n            name: \"userEmail\",\n            id: \"userEmail\",\n            \"data-testid\": \"edit-input-email\",\n            value: userEmail,\n            onChange: this.handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"userDescription\",\n          children: [\"Descri\\xE7\\xE3o:\", /*#__PURE__*/_jsxDEV(\"textarea\", {\n            name: \"userDescription\",\n            id: \"userDescription\",\n            \"data-testid\": \"edit-input-description\",\n            value: userDescription,\n            onChange: this.handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          \"data-testid\": \"edit-button-save\",\n          disabled: isDisableButton,\n          onClick: this.salverUser,\n          children: \"Salvar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }, this);\n\n    return /*#__PURE__*/_jsxDEV(\"main\", {\n      \"data-testid\": \"page-profile-edit\",\n      className: styles.container,\n      children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: styles.profileEdit,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.banner\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n          className: styles.editSection,\n          children: [!requestIsDone ? /*#__PURE__*/_jsxDEV(Loading, {\n            header: false,\n            textColor: \"rgba(192, 195, 201, 1)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 32\n          }, this) : editForm, isSalved && /*#__PURE__*/_jsxDEV(Redirect, {\n            to: \"/profile\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 27\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default ProfileEdit;","map":{"version":3,"names":["React","Component","Redirect","Header","getUser","updateUser","Loading","styles","emptyUserPhoto","ProfileEdit","state","userName","userEmail","userImage","userDescription","requestIsDone","isDisableButton","isSalved","fetchUser","setState","user","name","email","image","description","validateButton","validateEmail","re","test","isValidEmail","isValid","length","salverUser","userInfo","handleChange","target","console","log","value","componentDidMount","render","editForm","imageSection","imageInput","container","profileEdit","banner","editSection"],"sources":["/home/pedroresende/projetos/trybe/frontend/sd-026-b-project-trybetunes/src/pages/ProfileEdit.jsx"],"sourcesContent":["import React, { Component } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport Header from '../components/Header';\nimport { getUser, updateUser } from '../services/userAPI';\nimport Loading from './Loading';\nimport styles from './ProfileEdit.module.css';\nimport emptyUserPhoto from '../images/emptyUserPhoto.webp';\n\nclass ProfileEdit extends Component {\n  state = {\n    userName: '',\n    userEmail: '',\n    userImage: '',\n    userDescription: '',\n    requestIsDone: true,\n    isDisableButton: true,\n    isSalved: false,\n  };\n\n  componentDidMount() {\n    this.fetchUser();\n  }\n\n  fetchUser = async () => {\n    this.setState({\n      requestIsDone: false,\n    });\n    const user = await getUser();\n    this.setState({\n      userName: user.name,\n      userEmail: user.email,\n      userImage: user.image,\n      userDescription: user.description,\n      requestIsDone: true,\n    }, () => {\n      this.validateButton();\n    });\n  };\n\n  validateEmail = (email) => {\n    const re = /\\S+@\\S+\\.\\S+/;\n    return re.test(email);\n  };\n\n  validateButton = () => {\n    const { userEmail, userName, userDescription, userImage } = this.state;\n    const isValidEmail = this.validateEmail(userEmail);\n    const isValid = userName.length > 0\n    && userEmail.length > 0\n    && userDescription.length > 0\n    && userImage.length > 0;\n    if (isValid && isValidEmail) {\n      this.setState({\n        isDisableButton: false,\n      });\n    }\n  };\n\n  salverUser = async () => {\n    const { userName, userEmail, userImage, userDescription } = this.state;\n\n    const userInfo = {\n      name: userName,\n      email: userEmail,\n      image: userImage,\n      description: userDescription,\n    };\n    this.setState({\n      requestIsDone: false,\n    });\n    await updateUser(userInfo);\n    this.setState({\n      isSalved: true,\n      requestIsDone: true,\n    });\n  };\n\n  handleChange = ({ target }) => {\n    console.log(target.value);\n    const { name, value } = target;\n    this.setState({\n      [name]: value,\n    }, () => {\n      this.validateButton();\n    });\n  };\n\n  render() {\n    const { userName, userEmail, userImage, userDescription, requestIsDone,\n      isDisableButton, isSalved,\n    } = this.state;\n    const editForm = (\n      <form>\n        <div className={ styles.imageSection }>\n          {\n            userImage === ''\n              ? (\n                <img\n                  className={ styles.userImage }\n                  src={ emptyUserPhoto }\n                  alt=\"Foto de Perfil\"\n                />\n              ) : (\n                <img\n                  className={ styles.userImage }\n                  src={ userImage }\n                  alt=\"Foto de Perfil\"\n                />\n              )\n          }\n          <label htmlFor=\"userImage\">\n            <input\n              className={ styles.imageInput }\n              type=\"text\"\n              name=\"userImage\"\n              placeholder=\"Insira um link\"\n              id=\"username\"\n              data-testid=\"edit-input-image\"\n              value={ userImage }\n              alt=\"Foto de Perfil\"\n              onChange={ this.handleChange }\n            />\n          </label>\n        </div>\n        <div className=\"text\">\n\n          <label htmlFor=\"userName\">\n            Nome:\n            <input\n              name=\"userName\"\n              id=\"userName\"\n              type=\"name\"\n              data-testid=\"edit-input-name\"\n              value={ userName }\n              onChange={ this.handleChange }\n            />\n          </label>\n          <label htmlFor=\"userEmail\">\n            Email:\n            <input\n              type=\"email\"\n              name=\"userEmail\"\n              id=\"userEmail\"\n              data-testid=\"edit-input-email\"\n              value={ userEmail }\n              onChange={ this.handleChange }\n            />\n          </label>\n          <label htmlFor=\"userDescription\">\n            Descrição:\n            <textarea\n              name=\"userDescription\"\n              id=\"userDescription\"\n              data-testid=\"edit-input-description\"\n              value={ userDescription }\n              onChange={ this.handleChange }\n            />\n          </label>\n          <button\n            type=\"button\"\n            data-testid=\"edit-button-save\"\n            disabled={ isDisableButton }\n            onClick={ this.salverUser }\n          >\n            Salvar\n          </button>\n        </div>\n      </form>\n    );\n\n    return (\n      <main data-testid=\"page-profile-edit\" className={ styles.container }>\n        <Header />\n\n        <section className={ styles.profileEdit }>\n\n          <div className={ styles.banner } />\n\n          <section className={ styles.editSection }>\n\n            { !requestIsDone ? <Loading\n              header={ false }\n              textColor=\"rgba(192, 195, 201, 1)\"\n            /> : editForm }\n            { isSalved && <Redirect to=\"/profile\" />}\n          </section>\n\n        </section>\n      </main>\n    );\n  }\n}\n\nexport default ProfileEdit;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}