{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst utils = require(\"../../utils\");\n\nconst partial_1 = require(\"../matchers/partial\");\n\nclass DeepFilter {\n  constructor(_settings, _micromatchOptions) {\n    this._settings = _settings;\n    this._micromatchOptions = _micromatchOptions;\n  }\n\n  getFilter(basePath, positive, negative) {\n    const matcher = this._getMatcher(positive);\n\n    const negativeRe = this._getNegativePatternsRe(negative);\n\n    return entry => this._filter(basePath, entry, matcher, negativeRe);\n  }\n\n  _getMatcher(patterns) {\n    return new partial_1.default(patterns, this._settings, this._micromatchOptions);\n  }\n\n  _getNegativePatternsRe(patterns) {\n    const affectDepthOfReadingPatterns = patterns.filter(utils.pattern.isAffectDepthOfReadingPattern);\n    return utils.pattern.convertPatternsToRe(affectDepthOfReadingPatterns, this._micromatchOptions);\n  }\n\n  _filter(basePath, entry, matcher, negativeRe) {\n    if (this._isSkippedByDeep(basePath, entry.path)) {\n      return false;\n    }\n\n    if (this._isSkippedSymbolicLink(entry)) {\n      return false;\n    }\n\n    const filepath = utils.path.removeLeadingDotSegment(entry.path);\n\n    if (this._isSkippedByPositivePatterns(filepath, matcher)) {\n      return false;\n    }\n\n    return this._isSkippedByNegativePatterns(filepath, negativeRe);\n  }\n\n  _isSkippedByDeep(basePath, entryPath) {\n    /**\n     * Avoid unnecessary depth calculations when it doesn't matter.\n     */\n    if (this._settings.deep === Infinity) {\n      return false;\n    }\n\n    return this._getEntryLevel(basePath, entryPath) >= this._settings.deep;\n  }\n\n  _getEntryLevel(basePath, entryPath) {\n    const entryPathDepth = entryPath.split('/').length;\n\n    if (basePath === '') {\n      return entryPathDepth;\n    }\n\n    const basePathDepth = basePath.split('/').length;\n    return entryPathDepth - basePathDepth;\n  }\n\n  _isSkippedSymbolicLink(entry) {\n    return !this._settings.followSymbolicLinks && entry.dirent.isSymbolicLink();\n  }\n\n  _isSkippedByPositivePatterns(entryPath, matcher) {\n    return !this._settings.baseNameMatch && !matcher.match(entryPath);\n  }\n\n  _isSkippedByNegativePatterns(entryPath, patternsRe) {\n    return !utils.pattern.matchAny(entryPath, patternsRe);\n  }\n\n}\n\nexports.default = DeepFilter;","map":{"version":3,"names":["Object","defineProperty","exports","value","utils","require","partial_1","DeepFilter","constructor","_settings","_micromatchOptions","getFilter","basePath","positive","negative","matcher","_getMatcher","negativeRe","_getNegativePatternsRe","entry","_filter","patterns","default","affectDepthOfReadingPatterns","filter","pattern","isAffectDepthOfReadingPattern","convertPatternsToRe","_isSkippedByDeep","path","_isSkippedSymbolicLink","filepath","removeLeadingDotSegment","_isSkippedByPositivePatterns","_isSkippedByNegativePatterns","entryPath","deep","Infinity","_getEntryLevel","entryPathDepth","split","length","basePathDepth","followSymbolicLinks","dirent","isSymbolicLink","baseNameMatch","match","patternsRe","matchAny"],"sources":["/home/pedroresende/projetos/trybe/frontend/sd-026-b-project-trybetunes/node_modules/fast-glob/out/providers/filters/deep.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst utils = require(\"../../utils\");\nconst partial_1 = require(\"../matchers/partial\");\nclass DeepFilter {\n    constructor(_settings, _micromatchOptions) {\n        this._settings = _settings;\n        this._micromatchOptions = _micromatchOptions;\n    }\n    getFilter(basePath, positive, negative) {\n        const matcher = this._getMatcher(positive);\n        const negativeRe = this._getNegativePatternsRe(negative);\n        return (entry) => this._filter(basePath, entry, matcher, negativeRe);\n    }\n    _getMatcher(patterns) {\n        return new partial_1.default(patterns, this._settings, this._micromatchOptions);\n    }\n    _getNegativePatternsRe(patterns) {\n        const affectDepthOfReadingPatterns = patterns.filter(utils.pattern.isAffectDepthOfReadingPattern);\n        return utils.pattern.convertPatternsToRe(affectDepthOfReadingPatterns, this._micromatchOptions);\n    }\n    _filter(basePath, entry, matcher, negativeRe) {\n        if (this._isSkippedByDeep(basePath, entry.path)) {\n            return false;\n        }\n        if (this._isSkippedSymbolicLink(entry)) {\n            return false;\n        }\n        const filepath = utils.path.removeLeadingDotSegment(entry.path);\n        if (this._isSkippedByPositivePatterns(filepath, matcher)) {\n            return false;\n        }\n        return this._isSkippedByNegativePatterns(filepath, negativeRe);\n    }\n    _isSkippedByDeep(basePath, entryPath) {\n        /**\n         * Avoid unnecessary depth calculations when it doesn't matter.\n         */\n        if (this._settings.deep === Infinity) {\n            return false;\n        }\n        return this._getEntryLevel(basePath, entryPath) >= this._settings.deep;\n    }\n    _getEntryLevel(basePath, entryPath) {\n        const entryPathDepth = entryPath.split('/').length;\n        if (basePath === '') {\n            return entryPathDepth;\n        }\n        const basePathDepth = basePath.split('/').length;\n        return entryPathDepth - basePathDepth;\n    }\n    _isSkippedSymbolicLink(entry) {\n        return !this._settings.followSymbolicLinks && entry.dirent.isSymbolicLink();\n    }\n    _isSkippedByPositivePatterns(entryPath, matcher) {\n        return !this._settings.baseNameMatch && !matcher.match(entryPath);\n    }\n    _isSkippedByNegativePatterns(entryPath, patternsRe) {\n        return !utils.pattern.matchAny(entryPath, patternsRe);\n    }\n}\nexports.default = DeepFilter;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}