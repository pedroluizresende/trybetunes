{"ast":null,"code":"import _regeneratorRuntime from\"/home/pedroresende/projetos/trybe/frontend/sd-026-b-project-trybetunes/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/pedroresende/projetos/trybe/frontend/sd-026-b-project-trybetunes/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/home/pedroresende/projetos/trybe/frontend/sd-026-b-project-trybetunes/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _classCallCheck from\"/home/pedroresende/projetos/trybe/frontend/sd-026-b-project-trybetunes/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/pedroresende/projetos/trybe/frontend/sd-026-b-project-trybetunes/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/home/pedroresende/projetos/trybe/frontend/sd-026-b-project-trybetunes/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/pedroresende/projetos/trybe/frontend/sd-026-b-project-trybetunes/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from'react';import Header from'../components/Header';import searchAlbumsAPI from'../services/searchAlbumsAPI';import styles from'./Search.module.css';import Loading from'./Loading';import AlbumsList from'../components/AlbumsList';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Search=/*#__PURE__*/function(_Component){_inherits(Search,_Component);var _super=_createSuper(Search);function Search(){var _this;_classCallCheck(this,Search);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={isDisabledButtton:true,searchInput:'',albums:[],artistName:'',isLoading:false};_this.handleChangle=function(_ref){var target=_ref.target;var name=target.name,value=target.value;_this.setState(_defineProperty({},name,value),function(){if(value.length>=2){_this.setState({isDisabledButtton:false});}else{_this.setState({isDisabledButtton:true});}});};_this.searching=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var searchInput,fetchAlbuns;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();searchInput=_this.state.searchInput;_this.setState({searchInput:'',albums:[],artistName:searchInput,isLoading:true});_context.next=5;return searchAlbumsAPI(searchInput);case 5:fetchAlbuns=_context.sent;_this.setState({albums:fetchAlbuns,isLoading:false});case 7:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref2.apply(this,arguments);};}();return _this;}_createClass(Search,[{key:\"render\",value:function render(){var _this2=this;var _this$state=this.state,isDisabledButtton=_this$state.isDisabledButtton,searchInput=_this$state.searchInput,albums=_this$state.albums,artistName=_this$state.artistName,isLoading=_this$state.isLoading;return/*#__PURE__*/_jsxs(\"div\",{\"data-testid\":\"page-search\",className:styles.container,children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"main\",{className:styles.search,children:[/*#__PURE__*/_jsxs(\"form\",{className:styles.searchForm,onSubmit:function onSubmit(event){return _this2.searching(event);},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",\"data-testid\":\"search-artist-input\",name:\"searchInput\",value:searchInput,onChange:this.handleChangle,placeholder:\"digite a sua pesquisa\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",\"data-testid\":\"search-artist-button\",disabled:isDisabledButtton,children:\"Pesquisar\"})]}),/*#__PURE__*/_jsx(\"section\",{className:styles.albumsSection,children:isLoading?/*#__PURE__*/_jsx(Loading,{header:false,textColor:\"rgba(192, 195, 201, 1)\"}):/*#__PURE__*/_jsx(AlbumsList,{albums:albums,artistName:artistName})})]})]});}}]);return Search;}(Component);export default Search;","map":{"version":3,"names":["React","Component","Header","searchAlbumsAPI","styles","Loading","AlbumsList","Search","state","isDisabledButtton","searchInput","albums","artistName","isLoading","handleChangle","target","name","value","setState","length","searching","e","preventDefault","fetchAlbuns","container","search","searchForm","event","albumsSection"],"sources":["/home/pedroresende/projetos/trybe/frontend/sd-026-b-project-trybetunes/src/pages/Search.jsx"],"sourcesContent":["import React, { Component } from 'react';\nimport Header from '../components/Header';\nimport searchAlbumsAPI from '../services/searchAlbumsAPI';\nimport styles from './Search.module.css';\nimport Loading from './Loading';\nimport AlbumsList from '../components/AlbumsList';\n\nclass Search extends Component {\n  state = {\n    isDisabledButtton: true,\n    searchInput: '',\n    albums: [],\n    artistName: '',\n    isLoading: false,\n  };\n\n  handleChangle = ({ target }) => {\n    const { name, value } = target;\n    this.setState({\n      [name]: value,\n    }, () => {\n      if (value.length >= 2) {\n        this.setState({\n          isDisabledButtton: false,\n        });\n      } else {\n        this.setState({\n          isDisabledButtton: true,\n        });\n      }\n    });\n  };\n\n  searching = async (e) => {\n    e.preventDefault();\n    const { searchInput } = this.state;\n    this.setState({\n      searchInput: '',\n      albums: [],\n      artistName: searchInput,\n      isLoading: true,\n    });\n    const fetchAlbuns = await searchAlbumsAPI(searchInput);\n    this.setState({\n      albums: fetchAlbuns,\n      isLoading: false,\n    });\n  };\n\n  render() {\n    const { isDisabledButtton, searchInput, albums, artistName, isLoading } = this.state;\n    return (\n      <div data-testid=\"page-search\" className={ styles.container }>\n        <Header />\n        <main className={ styles.search }>\n          <form\n            className={ styles.searchForm }\n            onSubmit={ (event) => this.searching(event) }\n          >\n            <input\n              type=\"text\"\n              data-testid=\"search-artist-input\"\n              name=\"searchInput\"\n              value={ searchInput }\n              onChange={ this.handleChangle }\n              placeholder=\"digite a sua pesquisa\"\n            />\n            <button\n              type=\"submit\"\n              data-testid=\"search-artist-button\"\n              disabled={ isDisabledButtton }\n            >\n              Pesquisar\n            </button>\n          </form>\n          <section className={ styles.albumsSection }>\n            {\n              isLoading\n                ? <Loading header={ false } textColor=\"rgba(192, 195, 201, 1)\" />\n                : (\n                  <AlbumsList\n                    albums={ albums }\n                    artistName={ artistName }\n                  />\n                )\n            }\n          </section>\n        </main>\n      </div>\n    );\n  }\n}\n\nexport default Search;\n"],"mappings":"skCAAA,MAAOA,MAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,OAAP,KAAmB,sBAAnB,CACA,MAAOC,gBAAP,KAA4B,6BAA5B,CACA,MAAOC,OAAP,KAAmB,qBAAnB,CACA,MAAOC,QAAP,KAAoB,WAApB,CACA,MAAOC,WAAP,KAAuB,0BAAvB,C,2FAEMC,O,2TACJC,K,CAAQ,CACNC,iBAAiB,CAAE,IADb,CAENC,WAAW,CAAE,EAFP,CAGNC,MAAM,CAAE,EAHF,CAINC,UAAU,CAAE,EAJN,CAKNC,SAAS,CAAE,KALL,C,OAQRC,a,CAAgB,cAAgB,IAAbC,OAAa,MAAbA,MAAa,CAC9B,GAAQC,KAAR,CAAwBD,MAAxB,CAAQC,IAAR,CAAcC,KAAd,CAAwBF,MAAxB,CAAcE,KAAd,CACA,MAAKC,QAAL,oBACGF,IADH,CACUC,KADV,EAEG,UAAM,CACP,GAAIA,KAAK,CAACE,MAAN,EAAgB,CAApB,CAAuB,CACrB,MAAKD,QAAL,CAAc,CACZT,iBAAiB,CAAE,KADP,CAAd,EAGD,CAJD,IAIO,CACL,MAAKS,QAAL,CAAc,CACZT,iBAAiB,CAAE,IADP,CAAd,EAGD,CACF,CAZD,EAaD,C,OAEDW,S,6FAAY,iBAAOC,CAAP,gJACVA,CAAC,CAACC,cAAF,GACQZ,WAFE,CAEc,MAAKF,KAFnB,CAEFE,WAFE,CAGV,MAAKQ,QAAL,CAAc,CACZR,WAAW,CAAE,EADD,CAEZC,MAAM,CAAE,EAFI,CAGZC,UAAU,CAAEF,WAHA,CAIZG,SAAS,CAAE,IAJC,CAAd,EAHU,sBASgBV,gBAAe,CAACO,WAAD,CAT/B,QASJa,WATI,eAUV,MAAKL,QAAL,CAAc,CACZP,MAAM,CAAEY,WADI,CAEZV,SAAS,CAAE,KAFC,CAAd,EAVU,sD,uHAgBZ,iBAAS,iBACP,gBAA0E,KAAKL,KAA/E,CAAQC,iBAAR,aAAQA,iBAAR,CAA2BC,WAA3B,aAA2BA,WAA3B,CAAwCC,MAAxC,aAAwCA,MAAxC,CAAgDC,UAAhD,aAAgDA,UAAhD,CAA4DC,SAA5D,aAA4DA,SAA5D,CACA,mBACE,aAAK,cAAY,aAAjB,CAA+B,SAAS,CAAGT,MAAM,CAACoB,SAAlD,wBACE,KAAC,MAAD,IADF,cAEE,cAAM,SAAS,CAAGpB,MAAM,CAACqB,MAAzB,wBACE,cACE,SAAS,CAAGrB,MAAM,CAACsB,UADrB,CAEE,QAAQ,CAAG,kBAACC,KAAD,QAAW,OAAI,CAACP,SAAL,CAAeO,KAAf,CAAX,EAFb,wBAIE,cACE,IAAI,CAAC,MADP,CAEE,cAAY,qBAFd,CAGE,IAAI,CAAC,aAHP,CAIE,KAAK,CAAGjB,WAJV,CAKE,QAAQ,CAAG,KAAKI,aALlB,CAME,WAAW,CAAC,uBANd,EAJF,cAYE,eACE,IAAI,CAAC,QADP,CAEE,cAAY,sBAFd,CAGE,QAAQ,CAAGL,iBAHb,uBAZF,GADF,cAqBE,gBAAS,SAAS,CAAGL,MAAM,CAACwB,aAA5B,UAEIf,SAAS,cACL,KAAC,OAAD,EAAS,MAAM,CAAG,KAAlB,CAA0B,SAAS,CAAC,wBAApC,EADK,cAGL,KAAC,UAAD,EACE,MAAM,CAAGF,MADX,CAEE,UAAU,CAAGC,UAFf,EALR,EArBF,GAFF,GADF,CAuCD,C,oBAnFkBX,S,EAsFrB,cAAeM,OAAf"},"metadata":{},"sourceType":"module"}