{"ast":null,"code":"var _jsxFileName = \"/home/pedroresende/projetos/trybe/frontend/sd-026-b-project-trybetunes/src/pages/Favorites.jsx\";\nimport React, { Component } from 'react';\nimport Header from '../components/Header';\nimport { getFavoriteSongs, removeSong } from '../services/favoriteSongsAPI';\nimport Loading from './Loading';\nimport MusicCard from '../components/MusicCard';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Favorites extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      favoriteSongs: [],\n      requestIsDone: true\n    };\n\n    this.fecthFavoritesSong = async () => {\n      this.setState({\n        requestIsDone: false\n      });\n      const favoriteSongs = await getFavoriteSongs();\n      this.setState({\n        favoriteSongs,\n        requestIsDone: true\n      });\n    };\n\n    this.clickChange = async _ref => {\n      let {\n        target\n      } = _ref;\n      const {\n        favoriteSongs\n      } = this.state;\n      const song = favoriteSongs.find(music => music.trackId === +target.name);\n      this.setState({\n        requestIsDone: false\n      });\n      await removeSong(song);\n      const newFavoritesList = await getFavoriteSongs();\n      this.setState({\n        favoriteSongs: newFavoritesList,\n        requestIsDone: true\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.fecthFavoritesSong();\n  }\n\n  render() {\n    const {\n      favoriteSongs,\n      requestIsDone\n    } = this.state;\n    const favorite = true;\n\n    const favoriteList = /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: favoriteSongs.map(music => /*#__PURE__*/_jsxDEV(MusicCard, {\n        music: music,\n        clickChange: this.clickChange,\n        favoriteSongs: favoriteSongs,\n        favorite: favorite\n      }, music.trackId, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }, this);\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      \"data-testid\": \"page-favorites\",\n      className: \"favorites\",\n      children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this), !requestIsDone ? /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 27\n      }, this) : favoriteList]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default Favorites;","map":{"version":3,"names":["React","Component","Header","getFavoriteSongs","removeSong","Loading","MusicCard","Favorites","state","favoriteSongs","requestIsDone","fecthFavoritesSong","setState","clickChange","target","song","find","music","trackId","name","newFavoritesList","componentDidMount","render","favorite","favoriteList","map"],"sources":["/home/pedroresende/projetos/trybe/frontend/sd-026-b-project-trybetunes/src/pages/Favorites.jsx"],"sourcesContent":["import React, { Component } from 'react';\nimport Header from '../components/Header';\nimport { getFavoriteSongs, removeSong } from '../services/favoriteSongsAPI';\nimport Loading from './Loading';\nimport MusicCard from '../components/MusicCard';\n\nclass Favorites extends Component {\n  state = {\n    favoriteSongs: [],\n    requestIsDone: true,\n  };\n\n  componentDidMount() {\n    this.fecthFavoritesSong();\n  }\n\n  fecthFavoritesSong = async () => {\n    this.setState({\n      requestIsDone: false,\n    });\n    const favoriteSongs = await getFavoriteSongs();\n    this.setState({\n      favoriteSongs,\n      requestIsDone: true,\n    });\n  };\n\n  clickChange = async ({ target }) => {\n    const { favoriteSongs } = this.state;\n    const song = favoriteSongs.find((music) => music.trackId === (+target.name));\n    this.setState({\n      requestIsDone: false,\n    });\n    await removeSong(song);\n    const newFavoritesList = await getFavoriteSongs();\n    this.setState({\n      favoriteSongs: newFavoritesList,\n      requestIsDone: true,\n    });\n  };\n\n  render() {\n    const { favoriteSongs, requestIsDone } = this.state;\n    const favorite = true;\n    const favoriteList = (\n      <ul>\n        {\n          favoriteSongs.map((music) => (\n            <MusicCard\n              key={ music.trackId }\n              music={ music }\n              clickChange={ this.clickChange }\n              favoriteSongs={ favoriteSongs }\n              favorite={ favorite }\n            />\n          ))\n        }\n      </ul>\n    );\n    return (\n      <div data-testid=\"page-favorites\" className=\"favorites\">\n        <Header />\n        {!requestIsDone ? <Loading /> : favoriteList }\n      </div>\n    );\n  }\n}\n\nexport default Favorites;\n"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,SAASC,gBAAT,EAA2BC,UAA3B,QAA6C,8BAA7C;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,OAAOC,SAAP,MAAsB,yBAAtB;;;AAEA,MAAMC,SAAN,SAAwBN,SAAxB,CAAkC;EAAA;IAAA;IAAA,KAChCO,KADgC,GACxB;MACNC,aAAa,EAAE,EADT;MAENC,aAAa,EAAE;IAFT,CADwB;;IAAA,KAUhCC,kBAVgC,GAUX,YAAY;MAC/B,KAAKC,QAAL,CAAc;QACZF,aAAa,EAAE;MADH,CAAd;MAGA,MAAMD,aAAa,GAAG,MAAMN,gBAAgB,EAA5C;MACA,KAAKS,QAAL,CAAc;QACZH,aADY;QAEZC,aAAa,EAAE;MAFH,CAAd;IAID,CAnB+B;;IAAA,KAqBhCG,WArBgC,GAqBlB,cAAsB;MAAA,IAAf;QAAEC;MAAF,CAAe;MAClC,MAAM;QAAEL;MAAF,IAAoB,KAAKD,KAA/B;MACA,MAAMO,IAAI,GAAGN,aAAa,CAACO,IAAd,CAAoBC,KAAD,IAAWA,KAAK,CAACC,OAAN,KAAmB,CAACJ,MAAM,CAACK,IAAzD,CAAb;MACA,KAAKP,QAAL,CAAc;QACZF,aAAa,EAAE;MADH,CAAd;MAGA,MAAMN,UAAU,CAACW,IAAD,CAAhB;MACA,MAAMK,gBAAgB,GAAG,MAAMjB,gBAAgB,EAA/C;MACA,KAAKS,QAAL,CAAc;QACZH,aAAa,EAAEW,gBADH;QAEZV,aAAa,EAAE;MAFH,CAAd;IAID,CAjC+B;EAAA;;EAMhCW,iBAAiB,GAAG;IAClB,KAAKV,kBAAL;EACD;;EA2BDW,MAAM,GAAG;IACP,MAAM;MAAEb,aAAF;MAAiBC;IAAjB,IAAmC,KAAKF,KAA9C;IACA,MAAMe,QAAQ,GAAG,IAAjB;;IACA,MAAMC,YAAY,gBAChB;MAAA,UAEIf,aAAa,CAACgB,GAAd,CAAmBR,KAAD,iBAChB,QAAC,SAAD;QAEE,KAAK,EAAGA,KAFV;QAGE,WAAW,EAAG,KAAKJ,WAHrB;QAIE,aAAa,EAAGJ,aAJlB;QAKE,QAAQ,EAAGc;MALb,GACQN,KAAK,CAACC,OADd;QAAA;QAAA;QAAA;MAAA,QADF;IAFJ;MAAA;MAAA;MAAA;IAAA,QADF;;IAeA,oBACE;MAAK,eAAY,gBAAjB;MAAkC,SAAS,EAAC,WAA5C;MAAA,wBACE,QAAC,MAAD;QAAA;QAAA;QAAA;MAAA,QADF,EAEG,CAACR,aAAD,gBAAiB,QAAC,OAAD;QAAA;QAAA;QAAA;MAAA,QAAjB,GAA+Bc,YAFlC;IAAA;MAAA;MAAA;MAAA;IAAA,QADF;EAMD;;AA3D+B;;AA8DlC,eAAejB,SAAf"},"metadata":{},"sourceType":"module"}