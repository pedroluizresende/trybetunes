{"ast":null,"code":"'use strict';\n\nconst debug = require('debug')('stylelint:file-cache');\n\nconst fileEntryCache = require('file-entry-cache');\n\nconst getCacheFile = require('./getCacheFile');\n\nconst path = require('path');\n\nconst DEFAULT_CACHE_LOCATION = './.stylelintcache';\nconst DEFAULT_HASH = '';\n/** @typedef {import('file-entry-cache').FileDescriptor[\"meta\"] & { hashOfConfig?: string }} CacheMetadata */\n\n/**\n * @param {string} [cacheLocation]\n * @param {string} [hashOfConfig]\n * @constructor\n */\n\nclass FileCache {\n  constructor() {\n    let cacheLocation = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : DEFAULT_CACHE_LOCATION;\n    let cwd = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : process.cwd();\n    let hashOfConfig = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : DEFAULT_HASH;\n    const cacheFile = path.resolve(getCacheFile(cacheLocation, cwd));\n    debug(`Cache file is created at ${cacheFile}`);\n    this._fileCache = fileEntryCache.create(cacheFile);\n    this._hashOfConfig = hashOfConfig;\n  }\n  /**\n   * @param {string} absoluteFilepath\n   * @return {boolean}\n   */\n\n\n  hasFileChanged(absoluteFilepath) {\n    // Get file descriptor compares current metadata against cached\n    // one and stores the result to \"changed\" prop.w\n    const descriptor = this._fileCache.getFileDescriptor(absoluteFilepath);\n    /** @type {CacheMetadata} */\n\n\n    const meta = descriptor.meta || {};\n    const changed = descriptor.changed || meta.hashOfConfig !== this._hashOfConfig;\n\n    if (!changed) {\n      debug(`Skip linting ${absoluteFilepath}. File hasn't changed.`);\n    } // Mutate file descriptor object and store config hash to each file.\n    // Running lint with different config should invalidate the cache.\n\n\n    if (meta.hashOfConfig !== this._hashOfConfig) {\n      meta.hashOfConfig = this._hashOfConfig;\n    }\n\n    return changed;\n  }\n\n  reconcile() {\n    this._fileCache.reconcile();\n  }\n\n  destroy() {\n    this._fileCache.destroy();\n  }\n  /**\n   * @param {string} absoluteFilepath\n   */\n\n\n  removeEntry(absoluteFilepath) {\n    this._fileCache.removeEntry(absoluteFilepath);\n  }\n\n}\n\nmodule.exports = FileCache;","map":{"version":3,"names":["debug","require","fileEntryCache","getCacheFile","path","DEFAULT_CACHE_LOCATION","DEFAULT_HASH","FileCache","constructor","cacheLocation","cwd","process","hashOfConfig","cacheFile","resolve","_fileCache","create","_hashOfConfig","hasFileChanged","absoluteFilepath","descriptor","getFileDescriptor","meta","changed","reconcile","destroy","removeEntry","module","exports"],"sources":["/home/pedroresende/projetos/trybe/frontend/sd-026-b-project-trybetunes/node_modules/stylelint/lib/utils/FileCache.js"],"sourcesContent":["'use strict';\n\nconst debug = require('debug')('stylelint:file-cache');\nconst fileEntryCache = require('file-entry-cache');\nconst getCacheFile = require('./getCacheFile');\nconst path = require('path');\n\nconst DEFAULT_CACHE_LOCATION = './.stylelintcache';\nconst DEFAULT_HASH = '';\n\n/** @typedef {import('file-entry-cache').FileDescriptor[\"meta\"] & { hashOfConfig?: string }} CacheMetadata */\n\n/**\n * @param {string} [cacheLocation]\n * @param {string} [hashOfConfig]\n * @constructor\n */\nclass FileCache {\n\tconstructor(\n\t\tcacheLocation = DEFAULT_CACHE_LOCATION,\n\t\tcwd = process.cwd(),\n\t\thashOfConfig = DEFAULT_HASH,\n\t) {\n\t\tconst cacheFile = path.resolve(getCacheFile(cacheLocation, cwd));\n\n\t\tdebug(`Cache file is created at ${cacheFile}`);\n\t\tthis._fileCache = fileEntryCache.create(cacheFile);\n\t\tthis._hashOfConfig = hashOfConfig;\n\t}\n\n\t/**\n\t * @param {string} absoluteFilepath\n\t * @return {boolean}\n\t */\n\thasFileChanged(absoluteFilepath) {\n\t\t// Get file descriptor compares current metadata against cached\n\t\t// one and stores the result to \"changed\" prop.w\n\t\tconst descriptor = this._fileCache.getFileDescriptor(absoluteFilepath);\n\t\t/** @type {CacheMetadata} */\n\t\tconst meta = descriptor.meta || {};\n\t\tconst changed = descriptor.changed || meta.hashOfConfig !== this._hashOfConfig;\n\n\t\tif (!changed) {\n\t\t\tdebug(`Skip linting ${absoluteFilepath}. File hasn't changed.`);\n\t\t}\n\n\t\t// Mutate file descriptor object and store config hash to each file.\n\t\t// Running lint with different config should invalidate the cache.\n\t\tif (meta.hashOfConfig !== this._hashOfConfig) {\n\t\t\tmeta.hashOfConfig = this._hashOfConfig;\n\t\t}\n\n\t\treturn changed;\n\t}\n\n\treconcile() {\n\t\tthis._fileCache.reconcile();\n\t}\n\n\tdestroy() {\n\t\tthis._fileCache.destroy();\n\t}\n\n\t/**\n\t * @param {string} absoluteFilepath\n\t */\n\tremoveEntry(absoluteFilepath) {\n\t\tthis._fileCache.removeEntry(absoluteFilepath);\n\t}\n}\n\nmodule.exports = FileCache;\n"],"mappings":"AAAA;;AAEA,MAAMA,KAAK,GAAGC,OAAO,CAAC,OAAD,CAAP,CAAiB,sBAAjB,CAAd;;AACA,MAAMC,cAAc,GAAGD,OAAO,CAAC,kBAAD,CAA9B;;AACA,MAAME,YAAY,GAAGF,OAAO,CAAC,gBAAD,CAA5B;;AACA,MAAMG,IAAI,GAAGH,OAAO,CAAC,MAAD,CAApB;;AAEA,MAAMI,sBAAsB,GAAG,mBAA/B;AACA,MAAMC,YAAY,GAAG,EAArB;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AACA,MAAMC,SAAN,CAAgB;EACfC,WAAW,GAIT;IAAA,IAHDC,aAGC,uEAHeJ,sBAGf;IAAA,IAFDK,GAEC,uEAFKC,OAAO,CAACD,GAAR,EAEL;IAAA,IADDE,YACC,uEADcN,YACd;IACD,MAAMO,SAAS,GAAGT,IAAI,CAACU,OAAL,CAAaX,YAAY,CAACM,aAAD,EAAgBC,GAAhB,CAAzB,CAAlB;IAEAV,KAAK,CAAE,4BAA2Ba,SAAU,EAAvC,CAAL;IACA,KAAKE,UAAL,GAAkBb,cAAc,CAACc,MAAf,CAAsBH,SAAtB,CAAlB;IACA,KAAKI,aAAL,GAAqBL,YAArB;EACA;EAED;AACD;AACA;AACA;;;EACCM,cAAc,CAACC,gBAAD,EAAmB;IAChC;IACA;IACA,MAAMC,UAAU,GAAG,KAAKL,UAAL,CAAgBM,iBAAhB,CAAkCF,gBAAlC,CAAnB;IACA;;;IACA,MAAMG,IAAI,GAAGF,UAAU,CAACE,IAAX,IAAmB,EAAhC;IACA,MAAMC,OAAO,GAAGH,UAAU,CAACG,OAAX,IAAsBD,IAAI,CAACV,YAAL,KAAsB,KAAKK,aAAjE;;IAEA,IAAI,CAACM,OAAL,EAAc;MACbvB,KAAK,CAAE,gBAAemB,gBAAiB,wBAAlC,CAAL;IACA,CAV+B,CAYhC;IACA;;;IACA,IAAIG,IAAI,CAACV,YAAL,KAAsB,KAAKK,aAA/B,EAA8C;MAC7CK,IAAI,CAACV,YAAL,GAAoB,KAAKK,aAAzB;IACA;;IAED,OAAOM,OAAP;EACA;;EAEDC,SAAS,GAAG;IACX,KAAKT,UAAL,CAAgBS,SAAhB;EACA;;EAEDC,OAAO,GAAG;IACT,KAAKV,UAAL,CAAgBU,OAAhB;EACA;EAED;AACD;AACA;;;EACCC,WAAW,CAACP,gBAAD,EAAmB;IAC7B,KAAKJ,UAAL,CAAgBW,WAAhB,CAA4BP,gBAA5B;EACA;;AAnDc;;AAsDhBQ,MAAM,CAACC,OAAP,GAAiBrB,SAAjB"},"metadata":{},"sourceType":"script"}