{"ast":null,"code":"var _jsxFileName = \"/home/pedroresende/projetos/trybe/frontend/sd-026-b-project-trybetunes/src/pages/ProfileEdit.jsx\";\nimport React, { Component } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport Header from '../components/Header';\nimport { getUser, updateUser } from '../services/userAPI';\nimport Loading from './Loading';\nimport styles from './ProfileEdit.module.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass ProfileEdit extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      userName: '',\n      userEmail: '',\n      userImage: '',\n      userDescription: '',\n      requestIsDone: true,\n      isDisableButton: true,\n      isSalved: false\n    };\n\n    this.fetchUser = async () => {\n      this.setState({\n        requestIsDone: false\n      });\n      const user = await getUser();\n      this.setState({\n        userName: user.name,\n        userEmail: user.email,\n        userImage: user.image,\n        userDescription: user.description,\n        requestIsDone: true\n      }, () => {\n        this.validateButton();\n      });\n    };\n\n    this.validateEmail = email => {\n      const re = /\\S+@\\S+\\.\\S+/;\n      return re.test(email);\n    };\n\n    this.validateButton = () => {\n      const {\n        userEmail,\n        userName,\n        userDescription,\n        userImage\n      } = this.state;\n      const isValidEmail = this.validateEmail(userEmail);\n      const isValid = userName.length > 0 && userEmail.length > 0 && userDescription.length > 0 && userImage.length > 0;\n\n      if (isValid && isValidEmail) {\n        this.setState({\n          isDisableButton: false\n        });\n      }\n    };\n\n    this.salverUser = async () => {\n      const {\n        userName,\n        userEmail,\n        userImage,\n        userDescription\n      } = this.state;\n      const userInfo = {\n        name: userName,\n        email: userEmail,\n        image: userImage,\n        description: userDescription\n      };\n      this.setState({\n        requestIsDone: false\n      });\n      await updateUser(userInfo);\n      this.setState({\n        isSalved: true,\n        requestIsDone: true\n      });\n    };\n\n    this.handleChange = _ref => {\n      let {\n        target\n      } = _ref;\n      const {\n        name,\n        value\n      } = target;\n      this.setState({\n        [name]: value\n      }, () => {\n        this.validateButton();\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.fetchUser();\n  }\n\n  render() {\n    const {\n      userName,\n      userEmail,\n      userImage,\n      userDescription,\n      requestIsDone,\n      isDisableButton,\n      isSalved\n    } = this.state;\n\n    const editForm = /*#__PURE__*/_jsxDEV(\"form\", {\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"userName\",\n        children: [\"Nome:\", /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"userName\",\n          id: \"userName\",\n          type: \"name\",\n          \"data-testid\": \"edit-input-name\",\n          value: userName,\n          onChange: this.handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"userEmail\",\n        children: [\"Email:\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"email\",\n          name: \"userEmail\",\n          id: \"userEmail\",\n          \"data-testid\": \"edit-input-email\",\n          value: userEmail,\n          onChange: this.handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"userDescription\",\n        children: [\"Descri\\xE7\\xE3o:\", /*#__PURE__*/_jsxDEV(\"textarea\", {\n          name: \"userDescription\",\n          id: \"userDescription\",\n          \"data-testid\": \"edit-input-description\",\n          value: userDescription,\n          onChange: this.handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"userImage\",\n        children: [\"Foto de Perfil:\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"userImage\",\n          id: \"username\",\n          \"data-testid\": \"edit-input-image\",\n          value: userImage,\n          onChange: this.handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        \"data-testid\": \"edit-button-save\",\n        disabled: isDisableButton,\n        onClick: this.salverUser,\n        children: \"Salvar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }, this);\n\n    return /*#__PURE__*/_jsxDEV(\"main\", {\n      \"data-testid\": \"page-profile-edit\",\n      className: styles.container,\n      children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: styles.profileEdit\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 9\n      }, this), !requestIsDone ? /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 28\n      }, this) : editForm, isSalved && /*#__PURE__*/_jsxDEV(Redirect, {\n        to: \"/profile\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 23\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default ProfileEdit;","map":{"version":3,"names":["React","Component","Redirect","Header","getUser","updateUser","Loading","styles","ProfileEdit","state","userName","userEmail","userImage","userDescription","requestIsDone","isDisableButton","isSalved","fetchUser","setState","user","name","email","image","description","validateButton","validateEmail","re","test","isValidEmail","isValid","length","salverUser","userInfo","handleChange","target","value","componentDidMount","render","editForm","container","profileEdit"],"sources":["/home/pedroresende/projetos/trybe/frontend/sd-026-b-project-trybetunes/src/pages/ProfileEdit.jsx"],"sourcesContent":["import React, { Component } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport Header from '../components/Header';\nimport { getUser, updateUser } from '../services/userAPI';\nimport Loading from './Loading';\nimport styles from './ProfileEdit.module.css';\n\nclass ProfileEdit extends Component {\n  state = {\n    userName: '',\n    userEmail: '',\n    userImage: '',\n    userDescription: '',\n    requestIsDone: true,\n    isDisableButton: true,\n    isSalved: false,\n  };\n\n  componentDidMount() {\n    this.fetchUser();\n  }\n\n  fetchUser = async () => {\n    this.setState({\n      requestIsDone: false,\n    });\n    const user = await getUser();\n    this.setState({\n      userName: user.name,\n      userEmail: user.email,\n      userImage: user.image,\n      userDescription: user.description,\n      requestIsDone: true,\n    }, () => {\n      this.validateButton();\n    });\n  };\n\n  validateEmail = (email) => {\n    const re = /\\S+@\\S+\\.\\S+/;\n    return re.test(email);\n  };\n\n  validateButton = () => {\n    const { userEmail, userName, userDescription, userImage } = this.state;\n    const isValidEmail = this.validateEmail(userEmail);\n    const isValid = userName.length > 0\n    && userEmail.length > 0\n    && userDescription.length > 0\n    && userImage.length > 0;\n    if (isValid && isValidEmail) {\n      this.setState({\n        isDisableButton: false,\n      });\n    }\n  };\n\n  salverUser = async () => {\n    const { userName, userEmail, userImage, userDescription } = this.state;\n\n    const userInfo = {\n      name: userName,\n      email: userEmail,\n      image: userImage,\n      description: userDescription,\n    };\n    this.setState({\n      requestIsDone: false,\n    });\n    await updateUser(userInfo);\n    this.setState({\n      isSalved: true,\n      requestIsDone: true,\n    });\n  };\n\n  handleChange = ({ target }) => {\n    const { name, value } = target;\n    this.setState({\n      [name]: value,\n    }, () => {\n      this.validateButton();\n    });\n  };\n\n  render() {\n    const {\n      userName,\n      userEmail,\n      userImage,\n      userDescription,\n      requestIsDone,\n      isDisableButton,\n      isSalved,\n    } = this.state;\n    const editForm = (\n      <form>\n        <label htmlFor=\"userName\">\n          Nome:\n          <input\n            name=\"userName\"\n            id=\"userName\"\n            type=\"name\"\n            data-testid=\"edit-input-name\"\n            value={ userName }\n            onChange={ this.handleChange }\n          />\n        </label>\n        <label htmlFor=\"userEmail\">\n          Email:\n          <input\n            type=\"email\"\n            name=\"userEmail\"\n            id=\"userEmail\"\n            data-testid=\"edit-input-email\"\n            value={ userEmail }\n            onChange={ this.handleChange }\n          />\n        </label>\n        <label htmlFor=\"userDescription\">\n          Descrição:\n          <textarea\n            name=\"userDescription\"\n            id=\"userDescription\"\n            data-testid=\"edit-input-description\"\n            value={ userDescription }\n            onChange={ this.handleChange }\n          />\n        </label>\n        <label htmlFor=\"userImage\">\n          Foto de Perfil:\n          <input\n            type=\"text\"\n            name=\"userImage\"\n            id=\"username\"\n            data-testid=\"edit-input-image\"\n            value={ userImage }\n            onChange={ this.handleChange }\n          />\n        </label>\n        <button\n          type=\"button\"\n          data-testid=\"edit-button-save\"\n          disabled={ isDisableButton }\n          onClick={ this.salverUser }\n        >\n          Salvar\n        </button>\n      </form>\n    );\n\n    return (\n      <main data-testid=\"page-profile-edit\" className={ styles.container }>\n        <Header />\n\n        <section className={styles.profileEdit}>\n          \n        </section>\n        { !requestIsDone ? <Loading /> : editForm }\n        { isSalved && <Redirect to=\"/profile\" />}\n      </main>\n    );\n  }\n}\n\nexport default ProfileEdit;\n"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,QAAT,QAAyB,kBAAzB;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,SAASC,OAAT,EAAkBC,UAAlB,QAAoC,qBAApC;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,OAAOC,MAAP,MAAmB,0BAAnB;;;AAEA,MAAMC,WAAN,SAA0BP,SAA1B,CAAoC;EAAA;IAAA;IAAA,KAClCQ,KADkC,GAC1B;MACNC,QAAQ,EAAE,EADJ;MAENC,SAAS,EAAE,EAFL;MAGNC,SAAS,EAAE,EAHL;MAINC,eAAe,EAAE,EAJX;MAKNC,aAAa,EAAE,IALT;MAMNC,eAAe,EAAE,IANX;MAONC,QAAQ,EAAE;IAPJ,CAD0B;;IAAA,KAelCC,SAfkC,GAetB,YAAY;MACtB,KAAKC,QAAL,CAAc;QACZJ,aAAa,EAAE;MADH,CAAd;MAGA,MAAMK,IAAI,GAAG,MAAMf,OAAO,EAA1B;MACA,KAAKc,QAAL,CAAc;QACZR,QAAQ,EAAES,IAAI,CAACC,IADH;QAEZT,SAAS,EAAEQ,IAAI,CAACE,KAFJ;QAGZT,SAAS,EAAEO,IAAI,CAACG,KAHJ;QAIZT,eAAe,EAAEM,IAAI,CAACI,WAJV;QAKZT,aAAa,EAAE;MALH,CAAd,EAMG,MAAM;QACP,KAAKU,cAAL;MACD,CARD;IASD,CA7BiC;;IAAA,KA+BlCC,aA/BkC,GA+BjBJ,KAAD,IAAW;MACzB,MAAMK,EAAE,GAAG,cAAX;MACA,OAAOA,EAAE,CAACC,IAAH,CAAQN,KAAR,CAAP;IACD,CAlCiC;;IAAA,KAoClCG,cApCkC,GAoCjB,MAAM;MACrB,MAAM;QAAEb,SAAF;QAAaD,QAAb;QAAuBG,eAAvB;QAAwCD;MAAxC,IAAsD,KAAKH,KAAjE;MACA,MAAMmB,YAAY,GAAG,KAAKH,aAAL,CAAmBd,SAAnB,CAArB;MACA,MAAMkB,OAAO,GAAGnB,QAAQ,CAACoB,MAAT,GAAkB,CAAlB,IACbnB,SAAS,CAACmB,MAAV,GAAmB,CADN,IAEbjB,eAAe,CAACiB,MAAhB,GAAyB,CAFZ,IAGblB,SAAS,CAACkB,MAAV,GAAmB,CAHtB;;MAIA,IAAID,OAAO,IAAID,YAAf,EAA6B;QAC3B,KAAKV,QAAL,CAAc;UACZH,eAAe,EAAE;QADL,CAAd;MAGD;IACF,CAhDiC;;IAAA,KAkDlCgB,UAlDkC,GAkDrB,YAAY;MACvB,MAAM;QAAErB,QAAF;QAAYC,SAAZ;QAAuBC,SAAvB;QAAkCC;MAAlC,IAAsD,KAAKJ,KAAjE;MAEA,MAAMuB,QAAQ,GAAG;QACfZ,IAAI,EAAEV,QADS;QAEfW,KAAK,EAAEV,SAFQ;QAGfW,KAAK,EAAEV,SAHQ;QAIfW,WAAW,EAAEV;MAJE,CAAjB;MAMA,KAAKK,QAAL,CAAc;QACZJ,aAAa,EAAE;MADH,CAAd;MAGA,MAAMT,UAAU,CAAC2B,QAAD,CAAhB;MACA,KAAKd,QAAL,CAAc;QACZF,QAAQ,EAAE,IADE;QAEZF,aAAa,EAAE;MAFH,CAAd;IAID,CAnEiC;;IAAA,KAqElCmB,YArEkC,GAqEnB,QAAgB;MAAA,IAAf;QAAEC;MAAF,CAAe;MAC7B,MAAM;QAAEd,IAAF;QAAQe;MAAR,IAAkBD,MAAxB;MACA,KAAKhB,QAAL,CAAc;QACZ,CAACE,IAAD,GAAQe;MADI,CAAd,EAEG,MAAM;QACP,KAAKX,cAAL;MACD,CAJD;IAKD,CA5EiC;EAAA;;EAWlCY,iBAAiB,GAAG;IAClB,KAAKnB,SAAL;EACD;;EAiEDoB,MAAM,GAAG;IACP,MAAM;MACJ3B,QADI;MAEJC,SAFI;MAGJC,SAHI;MAIJC,eAJI;MAKJC,aALI;MAMJC,eANI;MAOJC;IAPI,IAQF,KAAKP,KART;;IASA,MAAM6B,QAAQ,gBACZ;MAAA,wBACE;QAAO,OAAO,EAAC,UAAf;QAAA,iCAEE;UACE,IAAI,EAAC,UADP;UAEE,EAAE,EAAC,UAFL;UAGE,IAAI,EAAC,MAHP;UAIE,eAAY,iBAJd;UAKE,KAAK,EAAG5B,QALV;UAME,QAAQ,EAAG,KAAKuB;QANlB;UAAA;UAAA;UAAA;QAAA,QAFF;MAAA;QAAA;QAAA;QAAA;MAAA,QADF,eAYE;QAAO,OAAO,EAAC,WAAf;QAAA,kCAEE;UACE,IAAI,EAAC,OADP;UAEE,IAAI,EAAC,WAFP;UAGE,EAAE,EAAC,WAHL;UAIE,eAAY,kBAJd;UAKE,KAAK,EAAGtB,SALV;UAME,QAAQ,EAAG,KAAKsB;QANlB;UAAA;UAAA;UAAA;QAAA,QAFF;MAAA;QAAA;QAAA;QAAA;MAAA,QAZF,eAuBE;QAAO,OAAO,EAAC,iBAAf;QAAA,4CAEE;UACE,IAAI,EAAC,iBADP;UAEE,EAAE,EAAC,iBAFL;UAGE,eAAY,wBAHd;UAIE,KAAK,EAAGpB,eAJV;UAKE,QAAQ,EAAG,KAAKoB;QALlB;UAAA;UAAA;UAAA;QAAA,QAFF;MAAA;QAAA;QAAA;QAAA;MAAA,QAvBF,eAiCE;QAAO,OAAO,EAAC,WAAf;QAAA,2CAEE;UACE,IAAI,EAAC,MADP;UAEE,IAAI,EAAC,WAFP;UAGE,EAAE,EAAC,UAHL;UAIE,eAAY,kBAJd;UAKE,KAAK,EAAGrB,SALV;UAME,QAAQ,EAAG,KAAKqB;QANlB;UAAA;UAAA;UAAA;QAAA,QAFF;MAAA;QAAA;QAAA;QAAA;MAAA,QAjCF,eA4CE;QACE,IAAI,EAAC,QADP;QAEE,eAAY,kBAFd;QAGE,QAAQ,EAAGlB,eAHb;QAIE,OAAO,EAAG,KAAKgB,UAJjB;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QA5CF;IAAA;MAAA;MAAA;MAAA;IAAA,QADF;;IAwDA,oBACE;MAAM,eAAY,mBAAlB;MAAsC,SAAS,EAAGxB,MAAM,CAACgC,SAAzD;MAAA,wBACE,QAAC,MAAD;QAAA;QAAA;QAAA;MAAA,QADF,eAGE;QAAS,SAAS,EAAEhC,MAAM,CAACiC;MAA3B;QAAA;QAAA;QAAA;MAAA,QAHF,EAMI,CAAC1B,aAAD,gBAAiB,QAAC,OAAD;QAAA;QAAA;QAAA;MAAA,QAAjB,GAA+BwB,QANnC,EAOItB,QAAQ,iBAAI,QAAC,QAAD;QAAU,EAAE,EAAC;MAAb;QAAA;QAAA;QAAA;MAAA,QAPhB;IAAA;MAAA;MAAA;MAAA;IAAA,QADF;EAWD;;AA3JiC;;AA8JpC,eAAeR,WAAf"},"metadata":{},"sourceType":"module"}