{"ast":null,"code":"import _regeneratorRuntime from\"/home/pedroresende/projetos/trybe/frontend/sd-026-b-project-trybetunes/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/pedroresende/projetos/trybe/frontend/sd-026-b-project-trybetunes/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/home/pedroresende/projetos/trybe/frontend/sd-026-b-project-trybetunes/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/pedroresende/projetos/trybe/frontend/sd-026-b-project-trybetunes/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/home/pedroresende/projetos/trybe/frontend/sd-026-b-project-trybetunes/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/pedroresende/projetos/trybe/frontend/sd-026-b-project-trybetunes/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from'react';import Header from'../components/Header';import{getFavoriteSongs,removeSong}from'../services/favoriteSongsAPI';import Loading from'./Loading';import MusicCard from'../components/MusicCard';import styles from'./Favorites.module.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Favorites=/*#__PURE__*/function(_Component){_inherits(Favorites,_Component);var _super=_createSuper(Favorites);function Favorites(){var _this;_classCallCheck(this,Favorites);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={favoriteSongs:[],requestIsDone:true};_this.fecthFavoritesSong=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var favoriteSongs;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this.setState({requestIsDone:false});_context.next=3;return getFavoriteSongs();case 3:favoriteSongs=_context.sent;_this.setState({favoriteSongs:favoriteSongs,requestIsDone:true});case 5:case\"end\":return _context.stop();}}},_callee);}));_this.clickChange=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(_ref2){var target,favoriteSongs,song,newFavoritesList;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:target=_ref2.target;favoriteSongs=_this.state.favoriteSongs;song=favoriteSongs.find(function(music){return music.trackId===+target.name;});_this.setState({requestIsDone:false});_context2.next=6;return removeSong(song);case 6:_context2.next=8;return getFavoriteSongs();case 8:newFavoritesList=_context2.sent;_this.setState({favoriteSongs:newFavoritesList,requestIsDone:true});case 10:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x){return _ref3.apply(this,arguments);};}();return _this;}_createClass(Favorites,[{key:\"componentDidMount\",value:function componentDidMount(){this.fecthFavoritesSong();}},{key:\"render\",value:function render(){var _this2=this;var _this$state=this.state,favoriteSongs=_this$state.favoriteSongs,requestIsDone=_this$state.requestIsDone;var favorite=true;var favoriteList=/*#__PURE__*/_jsx(\"ul\",{children:favoriteSongs.map(function(music){return/*#__PURE__*/_jsx(MusicCard,{music:music,clickChange:_this2.clickChange,favoriteSongs:favoriteSongs,favorite:favorite},music.trackId);})});return/*#__PURE__*/_jsxs(\"main\",{\"data-testid\":\"page-favorites\",className:styles.container,children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"section\",{className:styles.favorites,children:[/*#__PURE__*/_jsx(\"header\",{children:/*#__PURE__*/_jsx(\"h1\",{children:\"M\\xFAsicas Favoritas\"})}),/*#__PURE__*/_jsx(\"section\",{className:styles.favoritesSection,children:!requestIsDone?/*#__PURE__*/_jsx(Loading,{header:false,textColor:\"rgba(192, 195, 201, 1)\"}):favoriteList})]})]});}}]);return Favorites;}(Component);export default Favorites;","map":{"version":3,"names":["React","Component","Header","getFavoriteSongs","removeSong","Loading","MusicCard","styles","Favorites","state","favoriteSongs","requestIsDone","fecthFavoritesSong","setState","clickChange","target","song","find","music","trackId","name","newFavoritesList","favorite","favoriteList","map","container","favorites","favoritesSection"],"sources":["/home/pedroresende/projetos/trybe/frontend/sd-026-b-project-trybetunes/src/pages/Favorites.jsx"],"sourcesContent":["import React, { Component } from 'react';\nimport Header from '../components/Header';\nimport { getFavoriteSongs, removeSong } from '../services/favoriteSongsAPI';\nimport Loading from './Loading';\nimport MusicCard from '../components/MusicCard';\nimport styles from './Favorites.module.css';\n\nclass Favorites extends Component {\n  state = {\n    favoriteSongs: [],\n    requestIsDone: true,\n  };\n\n  componentDidMount() {\n    this.fecthFavoritesSong();\n  }\n\n  fecthFavoritesSong = async () => {\n    this.setState({\n      requestIsDone: false,\n    });\n    const favoriteSongs = await getFavoriteSongs();\n    this.setState({\n      favoriteSongs,\n      requestIsDone: true,\n    });\n  };\n\n  clickChange = async ({ target }) => {\n    const { favoriteSongs } = this.state;\n    const song = favoriteSongs.find((music) => music.trackId === (+target.name));\n    this.setState({\n      requestIsDone: false,\n    });\n    await removeSong(song);\n    const newFavoritesList = await getFavoriteSongs();\n    this.setState({\n      favoriteSongs: newFavoritesList,\n      requestIsDone: true,\n    });\n  };\n\n  render() {\n    const { favoriteSongs, requestIsDone } = this.state;\n    const favorite = true;\n    const favoriteList = (\n      <ul>\n        {\n          favoriteSongs.map((music) => (\n            <MusicCard\n              key={ music.trackId }\n              music={ music }\n              clickChange={ this.clickChange }\n              favoriteSongs={ favoriteSongs }\n              favorite={ favorite }\n            />\n          ))\n        }\n      </ul>\n    );\n    return (\n      <main data-testid=\"page-favorites\" className={ styles.container }>\n        <Header />\n        <section className={ styles.favorites }>\n          <header>\n            <h1>MÃºsicas Favoritas</h1>\n          </header>\n\n          <section className={ styles.favoritesSection }>\n            {!requestIsDone ? <Loading\n              header={ false }\n              textColor=\"rgba(192, 195, 201, 1)\"\n            /> : favoriteList }\n          </section>\n        </section>\n      </main>\n    );\n  }\n}\n\nexport default Favorites;\n"],"mappings":"w6BAAA,MAAOA,MAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,OAAP,KAAmB,sBAAnB,CACA,OAASC,gBAAT,CAA2BC,UAA3B,KAA6C,8BAA7C,CACA,MAAOC,QAAP,KAAoB,WAApB,CACA,MAAOC,UAAP,KAAsB,yBAAtB,CACA,MAAOC,OAAP,KAAmB,wBAAnB,C,2FAEMC,U,uUACJC,K,CAAQ,CACNC,aAAa,CAAE,EADT,CAENC,aAAa,CAAE,IAFT,C,OASRC,kB,wEAAqB,uJACnB,MAAKC,QAAL,CAAc,CACZF,aAAa,CAAE,KADH,CAAd,EADmB,sBAISR,iBAAgB,EAJzB,QAIbO,aAJa,eAKnB,MAAKG,QAAL,CAAc,CACZH,aAAa,CAAbA,aADY,CAEZC,aAAa,CAAE,IAFH,CAAd,EALmB,sD,SAWrBG,W,6FAAc,8LAASC,MAAT,OAASA,MAAT,CACJL,aADI,CACc,MAAKD,KADnB,CACJC,aADI,CAENM,IAFM,CAECN,aAAa,CAACO,IAAd,CAAmB,SAACC,KAAD,QAAWA,MAAK,CAACC,OAAN,GAAmB,CAACJ,MAAM,CAACK,IAAtC,EAAnB,CAFD,CAGZ,MAAKP,QAAL,CAAc,CACZF,aAAa,CAAE,KADH,CAAd,EAHY,uBAMNP,WAAU,CAACY,IAAD,CANJ,+BAOmBb,iBAAgB,EAPnC,QAONkB,gBAPM,gBAQZ,MAAKR,QAAL,CAAc,CACZH,aAAa,CAAEW,gBADH,CAEZV,aAAa,CAAE,IAFH,CAAd,EARY,yD,qIAfd,4BAAoB,CAClB,KAAKC,kBAAL,GACD,C,sBA2BD,iBAAS,iBACP,gBAAyC,KAAKH,KAA9C,CAAQC,aAAR,aAAQA,aAAR,CAAuBC,aAAvB,aAAuBA,aAAvB,CACA,GAAMW,SAAQ,CAAG,IAAjB,CACA,GAAMC,aAAY,cAChB,oBAEIb,aAAa,CAACc,GAAd,CAAkB,SAACN,KAAD,qBAChB,KAAC,SAAD,EAEE,KAAK,CAAGA,KAFV,CAGE,WAAW,CAAG,MAAI,CAACJ,WAHrB,CAIE,aAAa,CAAGJ,aAJlB,CAKE,QAAQ,CAAGY,QALb,EACQJ,KAAK,CAACC,OADd,CADgB,EAAlB,CAFJ,EADF,CAeA,mBACE,cAAM,cAAY,gBAAlB,CAAmC,SAAS,CAAGZ,MAAM,CAACkB,SAAtD,wBACE,KAAC,MAAD,IADF,cAEE,iBAAS,SAAS,CAAGlB,MAAM,CAACmB,SAA5B,wBACE,qCACE,4CADF,EADF,cAKE,gBAAS,SAAS,CAAGnB,MAAM,CAACoB,gBAA5B,UACG,CAAChB,aAAD,cAAiB,KAAC,OAAD,EAChB,MAAM,CAAG,KADO,CAEhB,SAAS,CAAC,wBAFM,EAAjB,CAGIY,YAJP,EALF,GAFF,GADF,CAiBD,C,uBAtEqBtB,S,EAyExB,cAAeO,UAAf"},"metadata":{},"sourceType":"module"}