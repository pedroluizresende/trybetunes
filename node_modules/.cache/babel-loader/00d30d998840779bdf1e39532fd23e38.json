{"ast":null,"code":"var _jsxFileName = \"/home/pedroresende/projetos/trybe/frontend/sd-026-b-project-trybetunes/src/pages/Favorites.jsx\";\nimport React, { Component } from 'react';\nimport Header from '../components/Header';\nimport { getFavoriteSongs, removeSong } from '../services/favoriteSongsAPI';\nimport Loading from './Loading';\nimport MusicCard from '../components/MusicCard';\nimport styles from './Favorites.module.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Favorites extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      favoriteSongs: [],\n      requestIsDone: true\n    };\n\n    this.fecthFavoritesSong = async () => {\n      this.setState({\n        requestIsDone: false\n      });\n      const favoriteSongs = await getFavoriteSongs();\n      this.setState({\n        favoriteSongs,\n        requestIsDone: true\n      });\n    };\n\n    this.clickChange = async _ref => {\n      let {\n        target\n      } = _ref;\n      const {\n        favoriteSongs\n      } = this.state;\n      const song = favoriteSongs.find(music => music.trackId === +target.name);\n      this.setState({\n        requestIsDone: false\n      });\n      await removeSong(song);\n      const newFavoritesList = await getFavoriteSongs();\n      this.setState({\n        favoriteSongs: newFavoritesList,\n        requestIsDone: true\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.fecthFavoritesSong();\n  }\n\n  render() {\n    const {\n      favoriteSongs,\n      requestIsDone\n    } = this.state;\n    const favorite = true;\n\n    const favoriteList = /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: favoriteSongs.map(music => /*#__PURE__*/_jsxDEV(MusicCard, {\n        music: music,\n        clickChange: this.clickChange,\n        favoriteSongs: favoriteSongs,\n        favorite: favorite\n      }, music.trackId, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }, this);\n\n    return /*#__PURE__*/_jsxDEV(\"main\", {\n      \"data-testid\": \"page-favorites\",\n      className: styles.container,\n      children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: styles.favorites,\n        children: [/*#__PURE__*/_jsxDEV(\"header\", {\n          children: /*#__PURE__*/_jsxDEV(\"h1\", {\n            children: \"M\\xFAsicas Favoritas\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n          className: styles.favoritesSection,\n          children: !requestIsDone ? /*#__PURE__*/_jsxDEV(Loading, {\n            header: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 31\n          }, this) : favoriteList\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default Favorites;","map":{"version":3,"names":["React","Component","Header","getFavoriteSongs","removeSong","Loading","MusicCard","styles","Favorites","state","favoriteSongs","requestIsDone","fecthFavoritesSong","setState","clickChange","target","song","find","music","trackId","name","newFavoritesList","componentDidMount","render","favorite","favoriteList","map","container","favorites","favoritesSection"],"sources":["/home/pedroresende/projetos/trybe/frontend/sd-026-b-project-trybetunes/src/pages/Favorites.jsx"],"sourcesContent":["import React, { Component } from 'react';\nimport Header from '../components/Header';\nimport { getFavoriteSongs, removeSong } from '../services/favoriteSongsAPI';\nimport Loading from './Loading';\nimport MusicCard from '../components/MusicCard';\nimport styles from './Favorites.module.css';\n\nclass Favorites extends Component {\n  state = {\n    favoriteSongs: [],\n    requestIsDone: true,\n  };\n\n  componentDidMount() {\n    this.fecthFavoritesSong();\n  }\n\n  fecthFavoritesSong = async () => {\n    this.setState({\n      requestIsDone: false,\n    });\n    const favoriteSongs = await getFavoriteSongs();\n    this.setState({\n      favoriteSongs,\n      requestIsDone: true,\n    });\n  };\n\n  clickChange = async ({ target }) => {\n    const { favoriteSongs } = this.state;\n    const song = favoriteSongs.find((music) => music.trackId === (+target.name));\n    this.setState({\n      requestIsDone: false,\n    });\n    await removeSong(song);\n    const newFavoritesList = await getFavoriteSongs();\n    this.setState({\n      favoriteSongs: newFavoritesList,\n      requestIsDone: true,\n    });\n  };\n\n  render() {\n    const { favoriteSongs, requestIsDone } = this.state;\n    const favorite = true;\n    const favoriteList = (\n      <ul>\n        {\n          favoriteSongs.map((music) => (\n            <MusicCard\n              key={ music.trackId }\n              music={ music }\n              clickChange={ this.clickChange }\n              favoriteSongs={ favoriteSongs }\n              favorite={ favorite }\n            />\n          ))\n        }\n      </ul>\n    );\n    return (\n      <main data-testid=\"page-favorites\" className={ styles.container }>\n        <Header />\n        <section className={ styles.favorites }>\n          <header>\n            <h1>MÃºsicas Favoritas</h1>\n          </header>\n\n          <section className={ styles.favoritesSection }>\n            {!requestIsDone ? <Loading header/> : favoriteList }\n          </section>\n        </section>\n      </main>\n    );\n  }\n}\n\nexport default Favorites;\n"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,SAASC,gBAAT,EAA2BC,UAA3B,QAA6C,8BAA7C;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,OAAOC,SAAP,MAAsB,yBAAtB;AACA,OAAOC,MAAP,MAAmB,wBAAnB;;;AAEA,MAAMC,SAAN,SAAwBP,SAAxB,CAAkC;EAAA;IAAA;IAAA,KAChCQ,KADgC,GACxB;MACNC,aAAa,EAAE,EADT;MAENC,aAAa,EAAE;IAFT,CADwB;;IAAA,KAUhCC,kBAVgC,GAUX,YAAY;MAC/B,KAAKC,QAAL,CAAc;QACZF,aAAa,EAAE;MADH,CAAd;MAGA,MAAMD,aAAa,GAAG,MAAMP,gBAAgB,EAA5C;MACA,KAAKU,QAAL,CAAc;QACZH,aADY;QAEZC,aAAa,EAAE;MAFH,CAAd;IAID,CAnB+B;;IAAA,KAqBhCG,WArBgC,GAqBlB,cAAsB;MAAA,IAAf;QAAEC;MAAF,CAAe;MAClC,MAAM;QAAEL;MAAF,IAAoB,KAAKD,KAA/B;MACA,MAAMO,IAAI,GAAGN,aAAa,CAACO,IAAd,CAAoBC,KAAD,IAAWA,KAAK,CAACC,OAAN,KAAmB,CAACJ,MAAM,CAACK,IAAzD,CAAb;MACA,KAAKP,QAAL,CAAc;QACZF,aAAa,EAAE;MADH,CAAd;MAGA,MAAMP,UAAU,CAACY,IAAD,CAAhB;MACA,MAAMK,gBAAgB,GAAG,MAAMlB,gBAAgB,EAA/C;MACA,KAAKU,QAAL,CAAc;QACZH,aAAa,EAAEW,gBADH;QAEZV,aAAa,EAAE;MAFH,CAAd;IAID,CAjC+B;EAAA;;EAMhCW,iBAAiB,GAAG;IAClB,KAAKV,kBAAL;EACD;;EA2BDW,MAAM,GAAG;IACP,MAAM;MAAEb,aAAF;MAAiBC;IAAjB,IAAmC,KAAKF,KAA9C;IACA,MAAMe,QAAQ,GAAG,IAAjB;;IACA,MAAMC,YAAY,gBAChB;MAAA,UAEIf,aAAa,CAACgB,GAAd,CAAmBR,KAAD,iBAChB,QAAC,SAAD;QAEE,KAAK,EAAGA,KAFV;QAGE,WAAW,EAAG,KAAKJ,WAHrB;QAIE,aAAa,EAAGJ,aAJlB;QAKE,QAAQ,EAAGc;MALb,GACQN,KAAK,CAACC,OADd;QAAA;QAAA;QAAA;MAAA,QADF;IAFJ;MAAA;MAAA;MAAA;IAAA,QADF;;IAeA,oBACE;MAAM,eAAY,gBAAlB;MAAmC,SAAS,EAAGZ,MAAM,CAACoB,SAAtD;MAAA,wBACE,QAAC,MAAD;QAAA;QAAA;QAAA;MAAA,QADF,eAEE;QAAS,SAAS,EAAGpB,MAAM,CAACqB,SAA5B;QAAA,wBACE;UAAA,uBACE;YAAA;UAAA;YAAA;YAAA;YAAA;UAAA;QADF;UAAA;UAAA;UAAA;QAAA,QADF,eAKE;UAAS,SAAS,EAAGrB,MAAM,CAACsB,gBAA5B;UAAA,UACG,CAAClB,aAAD,gBAAiB,QAAC,OAAD;YAAS,MAAM;UAAf;YAAA;YAAA;YAAA;UAAA,QAAjB,GAAqCc;QADxC;UAAA;UAAA;UAAA;QAAA,QALF;MAAA;QAAA;QAAA;QAAA;MAAA,QAFF;IAAA;MAAA;MAAA;MAAA;IAAA,QADF;EAcD;;AAnE+B;;AAsElC,eAAejB,SAAf"},"metadata":{},"sourceType":"module"}