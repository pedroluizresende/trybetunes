{"ast":null,"code":"var _jsxFileName = \"/home/pedroresende/projetos/trybe/frontend/sd-026-b-project-trybetunes/src/pages/ProfileEdit.jsx\";\nimport React, { Component } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport Header from '../components/Header';\nimport { getUser, updateUser } from '../services/userAPI';\nimport Loading from './Loading';\nimport styles from './ProfileEdit.module.css';\nimport emptyUserPhoto from '../images/emptyUserPhoto.webp';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass ProfileEdit extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      userName: '',\n      userEmail: '',\n      userImage: '',\n      userDescription: '',\n      requestIsDone: true,\n      isDisableButton: true,\n      isSalved: false\n    };\n\n    this.fetchUser = async () => {\n      this.setState({\n        requestIsDone: false\n      });\n      const user = await getUser();\n      console.log(user);\n      this.setState({\n        userName: user.name,\n        userEmail: user.email,\n        userImage: user.image,\n        userDescription: user.description,\n        requestIsDone: true\n      }, () => {\n        this.validateButton();\n      });\n    };\n\n    this.validateEmail = email => {\n      const re = /\\S+@\\S+\\.\\S+/;\n      return re.test(email);\n    };\n\n    this.validateButton = () => {\n      const {\n        userEmail,\n        userName,\n        userDescription,\n        userImage\n      } = this.state;\n      const isValidEmail = this.validateEmail(userEmail);\n      const isValid = userName.length > 0 && userEmail.length > 0 && userDescription.length > 0 && userImage.length > 0;\n\n      if (isValid && isValidEmail) {\n        this.setState({\n          isDisableButton: false\n        });\n      }\n    };\n\n    this.salverUser = async () => {\n      const {\n        userName,\n        userEmail,\n        userImage,\n        userDescription\n      } = this.state;\n      const userInfo = {\n        name: userName,\n        email: userEmail,\n        image: userImage,\n        description: userDescription\n      };\n      this.setState({\n        requestIsDone: false\n      });\n      await updateUser(userInfo);\n      this.setState({\n        isSalved: true,\n        requestIsDone: true\n      });\n    };\n\n    this.handleChange = _ref => {\n      let {\n        target\n      } = _ref;\n      const {\n        name,\n        value\n      } = target;\n      this.setState({\n        [name]: value\n      }, () => {\n        this.validateButton();\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.fetchUser();\n  }\n\n  render() {\n    const {\n      userName,\n      userEmail,\n      userImage,\n      userDescription,\n      requestIsDone,\n      isDisableButton,\n      isSalved\n    } = this.state;\n\n    const editForm = /*#__PURE__*/_jsxDEV(\"form\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [userImage === '' ? /*#__PURE__*/_jsxDEV(\"img\", {\n          className: styles.userImage,\n          src: emptyUserPhoto,\n          alt: \"Foto de Perfil\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 17\n        }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n          className: styles.userImage,\n          src: userImage,\n          alt: \"Foto de Perfil\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"userImage\",\n          children: [\"Foto de Perfil:\", /*#__PURE__*/_jsxDEV(\"input\", {\n            className: styles.imageInput,\n            type: \"image\",\n            name: \"text\",\n            id: \"username\",\n            \"data-testid\": \"edit-input-image\",\n            value: userImage,\n            alt: \"Foto de Perfil\",\n            onChange: this.handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"userName\",\n          children: [\"Nome:\", /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"userName\",\n            id: \"userName\",\n            type: \"name\",\n            \"data-testid\": \"edit-input-name\",\n            value: userName,\n            onChange: this.handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"userEmail\",\n          children: [\"Email:\", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"email\",\n            name: \"userEmail\",\n            id: \"userEmail\",\n            \"data-testid\": \"edit-input-email\",\n            value: userEmail,\n            onChange: this.handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"userDescription\",\n          children: [\"Descri\\xE7\\xE3o:\", /*#__PURE__*/_jsxDEV(\"textarea\", {\n            name: \"userDescription\",\n            id: \"userDescription\",\n            \"data-testid\": \"edit-input-description\",\n            value: userDescription,\n            onChange: this.handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          \"data-testid\": \"edit-button-save\",\n          disabled: isDisableButton,\n          onClick: this.salverUser,\n          children: \"Salvar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }, this);\n\n    return /*#__PURE__*/_jsxDEV(\"main\", {\n      \"data-testid\": \"page-profile-edit\",\n      className: styles.container,\n      children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: styles.profileEdit,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.banner\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n          className: styles.editSection,\n          children: [!requestIsDone ? /*#__PURE__*/_jsxDEV(Loading, {\n            header: false,\n            textColor: \"rgba(192, 195, 201, 1)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 32\n          }, this) : editForm, isSalved && /*#__PURE__*/_jsxDEV(Redirect, {\n            to: \"/profile\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 27\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default ProfileEdit;","map":{"version":3,"names":["React","Component","Redirect","Header","getUser","updateUser","Loading","styles","emptyUserPhoto","ProfileEdit","state","userName","userEmail","userImage","userDescription","requestIsDone","isDisableButton","isSalved","fetchUser","setState","user","console","log","name","email","image","description","validateButton","validateEmail","re","test","isValidEmail","isValid","length","salverUser","userInfo","handleChange","target","value","componentDidMount","render","editForm","imageInput","container","profileEdit","banner","editSection"],"sources":["/home/pedroresende/projetos/trybe/frontend/sd-026-b-project-trybetunes/src/pages/ProfileEdit.jsx"],"sourcesContent":["import React, { Component } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport Header from '../components/Header';\nimport { getUser, updateUser } from '../services/userAPI';\nimport Loading from './Loading';\nimport styles from './ProfileEdit.module.css';\nimport emptyUserPhoto from '../images/emptyUserPhoto.webp';\n\nclass ProfileEdit extends Component {\n  state = {\n    userName: '',\n    userEmail: '',\n    userImage: '',\n    userDescription: '',\n    requestIsDone: true,\n    isDisableButton: true,\n    isSalved: false,\n  };\n\n  componentDidMount() {\n    this.fetchUser();\n  }\n\n  fetchUser = async () => {\n    this.setState({\n      requestIsDone: false,\n    });\n    const user = await getUser();\n    console.log(user);\n    this.setState({\n      userName: user.name,\n      userEmail: user.email,\n      userImage: user.image,\n      userDescription: user.description,\n      requestIsDone: true,\n    }, () => {\n      this.validateButton();\n    });\n  };\n\n  validateEmail = (email) => {\n    const re = /\\S+@\\S+\\.\\S+/;\n    return re.test(email);\n  };\n\n  validateButton = () => {\n    const { userEmail, userName, userDescription, userImage } = this.state;\n    const isValidEmail = this.validateEmail(userEmail);\n    const isValid = userName.length > 0\n    && userEmail.length > 0\n    && userDescription.length > 0\n    && userImage.length > 0;\n    if (isValid && isValidEmail) {\n      this.setState({\n        isDisableButton: false,\n      });\n    }\n  };\n\n  salverUser = async () => {\n    const { userName, userEmail, userImage, userDescription } = this.state;\n\n    const userInfo = {\n      name: userName,\n      email: userEmail,\n      image: userImage,\n      description: userDescription,\n    };\n    this.setState({\n      requestIsDone: false,\n    });\n    await updateUser(userInfo);\n    this.setState({\n      isSalved: true,\n      requestIsDone: true,\n    });\n  };\n\n  handleChange = ({ target }) => {\n    const { name, value } = target;\n    this.setState({\n      [name]: value,\n    }, () => {\n      this.validateButton();\n    });\n  };\n\n  render() {\n    const { userName,\n      userEmail,\n      userImage,\n      userDescription,\n      requestIsDone,\n      isDisableButton,\n      isSalved,\n    } = this.state;\n    const editForm = (\n      <form>\n        <div>\n          {\n            userImage === ''\n              ? (\n                <img\n                  className={ styles.userImage }\n                  src={ emptyUserPhoto }\n                  alt=\"Foto de Perfil\"\n                />\n              ) : (\n                <img\n                  className={ styles.userImage }\n                  src={ userImage }\n                  alt=\"Foto de Perfil\"\n                />\n              )\n          }\n          <label htmlFor=\"userImage\">\n            Foto de Perfil:\n            <input\n              className={ styles.imageInput }\n              type=\"image\"\n              name=\"text\"\n              id=\"username\"\n              data-testid=\"edit-input-image\"\n              value={ userImage }\n              alt=\"Foto de Perfil\"\n              onChange={ this.handleChange }\n            />\n          </label>\n        </div>\n        <div>\n\n          <label htmlFor=\"userName\">\n            Nome:\n            <input\n              name=\"userName\"\n              id=\"userName\"\n              type=\"name\"\n              data-testid=\"edit-input-name\"\n              value={ userName }\n              onChange={ this.handleChange }\n            />\n          </label>\n          <label htmlFor=\"userEmail\">\n            Email:\n            <input\n              type=\"email\"\n              name=\"userEmail\"\n              id=\"userEmail\"\n              data-testid=\"edit-input-email\"\n              value={ userEmail }\n              onChange={ this.handleChange }\n            />\n          </label>\n          <label htmlFor=\"userDescription\">\n            Descrição:\n            <textarea\n              name=\"userDescription\"\n              id=\"userDescription\"\n              data-testid=\"edit-input-description\"\n              value={ userDescription }\n              onChange={ this.handleChange }\n            />\n          </label>\n          <button\n            type=\"button\"\n            data-testid=\"edit-button-save\"\n            disabled={ isDisableButton }\n            onClick={ this.salverUser }\n          >\n            Salvar\n          </button>\n        </div>\n      </form>\n    );\n\n    return (\n      <main data-testid=\"page-profile-edit\" className={ styles.container }>\n        <Header />\n\n        <section className={ styles.profileEdit }>\n\n          <div className={ styles.banner } />\n\n          <section className={ styles.editSection }>\n\n            { !requestIsDone ? <Loading\n              header={ false }\n              textColor=\"rgba(192, 195, 201, 1)\"\n            /> : editForm }\n            { isSalved && <Redirect to=\"/profile\" />}\n          </section>\n\n        </section>\n      </main>\n    );\n  }\n}\n\nexport default ProfileEdit;\n"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,QAAT,QAAyB,kBAAzB;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,SAASC,OAAT,EAAkBC,UAAlB,QAAoC,qBAApC;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,OAAOC,cAAP,MAA2B,+BAA3B;;;AAEA,MAAMC,WAAN,SAA0BR,SAA1B,CAAoC;EAAA;IAAA;IAAA,KAClCS,KADkC,GAC1B;MACNC,QAAQ,EAAE,EADJ;MAENC,SAAS,EAAE,EAFL;MAGNC,SAAS,EAAE,EAHL;MAINC,eAAe,EAAE,EAJX;MAKNC,aAAa,EAAE,IALT;MAMNC,eAAe,EAAE,IANX;MAONC,QAAQ,EAAE;IAPJ,CAD0B;;IAAA,KAelCC,SAfkC,GAetB,YAAY;MACtB,KAAKC,QAAL,CAAc;QACZJ,aAAa,EAAE;MADH,CAAd;MAGA,MAAMK,IAAI,GAAG,MAAMhB,OAAO,EAA1B;MACAiB,OAAO,CAACC,GAAR,CAAYF,IAAZ;MACA,KAAKD,QAAL,CAAc;QACZR,QAAQ,EAAES,IAAI,CAACG,IADH;QAEZX,SAAS,EAAEQ,IAAI,CAACI,KAFJ;QAGZX,SAAS,EAAEO,IAAI,CAACK,KAHJ;QAIZX,eAAe,EAAEM,IAAI,CAACM,WAJV;QAKZX,aAAa,EAAE;MALH,CAAd,EAMG,MAAM;QACP,KAAKY,cAAL;MACD,CARD;IASD,CA9BiC;;IAAA,KAgClCC,aAhCkC,GAgCjBJ,KAAD,IAAW;MACzB,MAAMK,EAAE,GAAG,cAAX;MACA,OAAOA,EAAE,CAACC,IAAH,CAAQN,KAAR,CAAP;IACD,CAnCiC;;IAAA,KAqClCG,cArCkC,GAqCjB,MAAM;MACrB,MAAM;QAAEf,SAAF;QAAaD,QAAb;QAAuBG,eAAvB;QAAwCD;MAAxC,IAAsD,KAAKH,KAAjE;MACA,MAAMqB,YAAY,GAAG,KAAKH,aAAL,CAAmBhB,SAAnB,CAArB;MACA,MAAMoB,OAAO,GAAGrB,QAAQ,CAACsB,MAAT,GAAkB,CAAlB,IACbrB,SAAS,CAACqB,MAAV,GAAmB,CADN,IAEbnB,eAAe,CAACmB,MAAhB,GAAyB,CAFZ,IAGbpB,SAAS,CAACoB,MAAV,GAAmB,CAHtB;;MAIA,IAAID,OAAO,IAAID,YAAf,EAA6B;QAC3B,KAAKZ,QAAL,CAAc;UACZH,eAAe,EAAE;QADL,CAAd;MAGD;IACF,CAjDiC;;IAAA,KAmDlCkB,UAnDkC,GAmDrB,YAAY;MACvB,MAAM;QAAEvB,QAAF;QAAYC,SAAZ;QAAuBC,SAAvB;QAAkCC;MAAlC,IAAsD,KAAKJ,KAAjE;MAEA,MAAMyB,QAAQ,GAAG;QACfZ,IAAI,EAAEZ,QADS;QAEfa,KAAK,EAAEZ,SAFQ;QAGfa,KAAK,EAAEZ,SAHQ;QAIfa,WAAW,EAAEZ;MAJE,CAAjB;MAMA,KAAKK,QAAL,CAAc;QACZJ,aAAa,EAAE;MADH,CAAd;MAGA,MAAMV,UAAU,CAAC8B,QAAD,CAAhB;MACA,KAAKhB,QAAL,CAAc;QACZF,QAAQ,EAAE,IADE;QAEZF,aAAa,EAAE;MAFH,CAAd;IAID,CApEiC;;IAAA,KAsElCqB,YAtEkC,GAsEnB,QAAgB;MAAA,IAAf;QAAEC;MAAF,CAAe;MAC7B,MAAM;QAAEd,IAAF;QAAQe;MAAR,IAAkBD,MAAxB;MACA,KAAKlB,QAAL,CAAc;QACZ,CAACI,IAAD,GAAQe;MADI,CAAd,EAEG,MAAM;QACP,KAAKX,cAAL;MACD,CAJD;IAKD,CA7EiC;EAAA;;EAWlCY,iBAAiB,GAAG;IAClB,KAAKrB,SAAL;EACD;;EAkEDsB,MAAM,GAAG;IACP,MAAM;MAAE7B,QAAF;MACJC,SADI;MAEJC,SAFI;MAGJC,eAHI;MAIJC,aAJI;MAKJC,eALI;MAMJC;IANI,IAOF,KAAKP,KAPT;;IAQA,MAAM+B,QAAQ,gBACZ;MAAA,wBACE;QAAA,WAEI5B,SAAS,KAAK,EAAd,gBAEI;UACE,SAAS,EAAGN,MAAM,CAACM,SADrB;UAEE,GAAG,EAAGL,cAFR;UAGE,GAAG,EAAC;QAHN;UAAA;UAAA;UAAA;QAAA,QAFJ,gBAQI;UACE,SAAS,EAAGD,MAAM,CAACM,SADrB;UAEE,GAAG,EAAGA,SAFR;UAGE,GAAG,EAAC;QAHN;UAAA;UAAA;UAAA;QAAA,QAVR,eAiBE;UAAO,OAAO,EAAC,WAAf;UAAA,2CAEE;YACE,SAAS,EAAGN,MAAM,CAACmC,UADrB;YAEE,IAAI,EAAC,OAFP;YAGE,IAAI,EAAC,MAHP;YAIE,EAAE,EAAC,UAJL;YAKE,eAAY,kBALd;YAME,KAAK,EAAG7B,SANV;YAOE,GAAG,EAAC,gBAPN;YAQE,QAAQ,EAAG,KAAKuB;UARlB;YAAA;YAAA;YAAA;UAAA,QAFF;QAAA;UAAA;UAAA;UAAA;QAAA,QAjBF;MAAA;QAAA;QAAA;QAAA;MAAA,QADF,eAgCE;QAAA,wBAEE;UAAO,OAAO,EAAC,UAAf;UAAA,iCAEE;YACE,IAAI,EAAC,UADP;YAEE,EAAE,EAAC,UAFL;YAGE,IAAI,EAAC,MAHP;YAIE,eAAY,iBAJd;YAKE,KAAK,EAAGzB,QALV;YAME,QAAQ,EAAG,KAAKyB;UANlB;YAAA;YAAA;YAAA;UAAA,QAFF;QAAA;UAAA;UAAA;UAAA;QAAA,QAFF,eAaE;UAAO,OAAO,EAAC,WAAf;UAAA,kCAEE;YACE,IAAI,EAAC,OADP;YAEE,IAAI,EAAC,WAFP;YAGE,EAAE,EAAC,WAHL;YAIE,eAAY,kBAJd;YAKE,KAAK,EAAGxB,SALV;YAME,QAAQ,EAAG,KAAKwB;UANlB;YAAA;YAAA;YAAA;UAAA,QAFF;QAAA;UAAA;UAAA;UAAA;QAAA,QAbF,eAwBE;UAAO,OAAO,EAAC,iBAAf;UAAA,4CAEE;YACE,IAAI,EAAC,iBADP;YAEE,EAAE,EAAC,iBAFL;YAGE,eAAY,wBAHd;YAIE,KAAK,EAAGtB,eAJV;YAKE,QAAQ,EAAG,KAAKsB;UALlB;YAAA;YAAA;YAAA;UAAA,QAFF;QAAA;UAAA;UAAA;UAAA;QAAA,QAxBF,eAkCE;UACE,IAAI,EAAC,QADP;UAEE,eAAY,kBAFd;UAGE,QAAQ,EAAGpB,eAHb;UAIE,OAAO,EAAG,KAAKkB,UAJjB;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QAlCF;MAAA;QAAA;QAAA;QAAA;MAAA,QAhCF;IAAA;MAAA;MAAA;MAAA;IAAA,QADF;;IA+EA,oBACE;MAAM,eAAY,mBAAlB;MAAsC,SAAS,EAAG3B,MAAM,CAACoC,SAAzD;MAAA,wBACE,QAAC,MAAD;QAAA;QAAA;QAAA;MAAA,QADF,eAGE;QAAS,SAAS,EAAGpC,MAAM,CAACqC,WAA5B;QAAA,wBAEE;UAAK,SAAS,EAAGrC,MAAM,CAACsC;QAAxB;UAAA;UAAA;UAAA;QAAA,QAFF,eAIE;UAAS,SAAS,EAAGtC,MAAM,CAACuC,WAA5B;UAAA,WAEI,CAAC/B,aAAD,gBAAiB,QAAC,OAAD;YACjB,MAAM,EAAG,KADQ;YAEjB,SAAS,EAAC;UAFO;YAAA;YAAA;YAAA;UAAA,QAAjB,GAGG0B,QALP,EAMIxB,QAAQ,iBAAI,QAAC,QAAD;YAAU,EAAE,EAAC;UAAb;YAAA;YAAA;YAAA;UAAA,QANhB;QAAA;UAAA;UAAA;UAAA;QAAA,QAJF;MAAA;QAAA;QAAA;QAAA;MAAA,QAHF;IAAA;MAAA;MAAA;MAAA;IAAA,QADF;EAoBD;;AA3LiC;;AA8LpC,eAAeR,WAAf"},"metadata":{},"sourceType":"module"}