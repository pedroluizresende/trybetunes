{"ast":null,"code":"import _regeneratorRuntime from\"/home/pedroresende/projetos/trybe/frontend/sd-026-b-project-trybetunes/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/pedroresende/projetos/trybe/frontend/sd-026-b-project-trybetunes/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/home/pedroresende/projetos/trybe/frontend/sd-026-b-project-trybetunes/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _classCallCheck from\"/home/pedroresende/projetos/trybe/frontend/sd-026-b-project-trybetunes/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/pedroresende/projetos/trybe/frontend/sd-026-b-project-trybetunes/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/home/pedroresende/projetos/trybe/frontend/sd-026-b-project-trybetunes/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/pedroresende/projetos/trybe/frontend/sd-026-b-project-trybetunes/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from'react';import{Redirect}from'react-router-dom';import{createUser}from'../services/userAPI';import Loading from'./Loading';import logo from'../images/logo.png';import styles from'./Login.module.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);var _super=_createSuper(Login);function Login(){var _this;_classCallCheck(this,Login);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={inputName:'',buttonIsDisabled:true,isLoading:false,redirectToSearch:false};_this.handleChange=function(_ref){var target=_ref.target;var name=target.name,value=target.value;var num=3;_this.setState(_defineProperty({},name,value),function(){if(value.length>=num){_this.setState({buttonIsDisabled:false});}else{_this.setState({buttonIsDisabled:true});}});};_this.pushEnter=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var inputName;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:inputName=_this.state.inputName;_this.setState({isLoading:true});_context.next=4;return createUser({name:inputName});case 4:_this.setState({redirectToSearch:true});case 5:case\"end\":return _context.stop();}}},_callee);}));return _this;}_createClass(Login,[{key:\"render\",value:function render(){var _this$state=this.state,inputName=_this$state.inputName,buttonIsDisabled=_this$state.buttonIsDisabled,isLoading=_this$state.isLoading,redirectToSearch=_this$state.redirectToSearch;var form=/*#__PURE__*/_jsxs(\"main\",{\"data-testid\":\"page-login\",className:styles.login,children:[/*#__PURE__*/_jsx(\"img\",{src:logo,alt:\"logo trybeTunes\"}),/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",children:/*#__PURE__*/_jsx(\"input\",{name:\"inputName\",type:\"name\",\"data-testid\":\"login-name-input\",onChange:this.handleChange,value:inputName,placeholder:\"qual \\xE9 o seu nome?\"})}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",\"data-testid\":\"login-submit-button\",onClick:this.pushEnter,disabled:buttonIsDisabled,children:\"Entrar\"})]})]});return/*#__PURE__*/_jsxs(\"div\",{className:\"login-page\",children:[isLoading?/*#__PURE__*/_jsx(Loading,{header:false,textColor:\"rgb(0, 59, 229, 1)\",P:true}):form,redirectToSearch&&/*#__PURE__*/_jsx(Redirect,{to:\"/search\"})]});}}]);return Login;}(Component);export default Login;","map":{"version":3,"names":["React","Component","Redirect","createUser","Loading","logo","styles","Login","state","inputName","buttonIsDisabled","isLoading","redirectToSearch","handleChange","target","name","value","num","setState","length","pushEnter","form","login"],"sources":["/home/pedroresende/projetos/trybe/frontend/sd-026-b-project-trybetunes/src/pages/Login.jsx"],"sourcesContent":["import React, { Component } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport { createUser } from '../services/userAPI';\nimport Loading from './Loading';\nimport logo from '../images/logo.png';\nimport styles from './Login.module.css';\n\nclass Login extends Component {\n  state = {\n    inputName: '',\n    buttonIsDisabled: true,\n    isLoading: false,\n    redirectToSearch: false,\n  };\n\n  handleChange = ({ target }) => {\n    const { name, value } = target;\n    const num = 3;\n    this.setState({\n      [name]: value,\n    }, () => {\n      if (value.length >= num) {\n        this.setState({\n          buttonIsDisabled: false,\n        });\n      } else {\n        this.setState({\n          buttonIsDisabled: true,\n        });\n      }\n    });\n  };\n\n  pushEnter = async () => {\n    const { inputName } = this.state;\n    this.setState({\n      isLoading: true,\n    });\n    await createUser({ name: inputName });\n    this.setState({\n      redirectToSearch: true,\n    });\n  };\n\n  render() {\n    const { inputName, buttonIsDisabled, isLoading, redirectToSearch } = this.state;\n    const form = (\n      <main data-testid=\"page-login\" className={ styles.login }>\n        <img src={ logo } alt=\"logo trybeTunes\" />\n        <form>\n          <label htmlFor=\"name\">\n            <input\n              name=\"inputName\"\n              type=\"name\"\n              data-testid=\"login-name-input\"\n              onChange={ this.handleChange }\n              value={ inputName }\n              placeholder=\"qual Ã© o seu nome?\"\n            />\n          </label>\n          <button\n            type=\"button\"\n            data-testid=\"login-submit-button\"\n            onClick={ this.pushEnter }\n            disabled={ buttonIsDisabled }\n          >\n            Entrar\n          </button>\n        </form>\n      </main>\n    );\n\n    return (\n      <div className=\"login-page\">\n        { isLoading ? <Loading\n          header={ false }\n          textColor=\"rgb(0, 59, 229, 1)\"\n          P\n        /> : form }\n        {\n          redirectToSearch && <Redirect to=\"/search\" />\n        }\n      </div>\n    );\n  }\n}\n\nexport default Login;\n"],"mappings":"skCAAA,MAAOA,MAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,QAAT,KAAyB,kBAAzB,CACA,OAASC,UAAT,KAA2B,qBAA3B,CACA,MAAOC,QAAP,KAAoB,WAApB,CACA,MAAOC,KAAP,KAAiB,oBAAjB,CACA,MAAOC,OAAP,KAAmB,oBAAnB,C,2FAEMC,M,uTACJC,K,CAAQ,CACNC,SAAS,CAAE,EADL,CAENC,gBAAgB,CAAE,IAFZ,CAGNC,SAAS,CAAE,KAHL,CAINC,gBAAgB,CAAE,KAJZ,C,OAORC,Y,CAAe,cAAgB,IAAbC,OAAa,MAAbA,MAAa,CAC7B,GAAQC,KAAR,CAAwBD,MAAxB,CAAQC,IAAR,CAAcC,KAAd,CAAwBF,MAAxB,CAAcE,KAAd,CACA,GAAMC,IAAG,CAAG,CAAZ,CACA,MAAKC,QAAL,oBACGH,IADH,CACUC,KADV,EAEG,UAAM,CACP,GAAIA,KAAK,CAACG,MAAN,EAAgBF,GAApB,CAAyB,CACvB,MAAKC,QAAL,CAAc,CACZR,gBAAgB,CAAE,KADN,CAAd,EAGD,CAJD,IAIO,CACL,MAAKQ,QAAL,CAAc,CACZR,gBAAgB,CAAE,IADN,CAAd,EAGD,CACF,CAZD,EAaD,C,OAEDU,S,wEAAY,mJACFX,SADE,CACY,MAAKD,KADjB,CACFC,SADE,CAEV,MAAKS,QAAL,CAAc,CACZP,SAAS,CAAE,IADC,CAAd,EAFU,sBAKJR,WAAU,CAAC,CAAEY,IAAI,CAAEN,SAAR,CAAD,CALN,QAMV,MAAKS,QAAL,CAAc,CACZN,gBAAgB,CAAE,IADN,CAAd,EANU,sD,yDAWZ,iBAAS,CACP,gBAAqE,KAAKJ,KAA1E,CAAQC,SAAR,aAAQA,SAAR,CAAmBC,gBAAnB,aAAmBA,gBAAnB,CAAqCC,SAArC,aAAqCA,SAArC,CAAgDC,gBAAhD,aAAgDA,gBAAhD,CACA,GAAMS,KAAI,cACR,cAAM,cAAY,YAAlB,CAA+B,SAAS,CAAGf,MAAM,CAACgB,KAAlD,wBACE,YAAK,GAAG,CAAGjB,IAAX,CAAkB,GAAG,CAAC,iBAAtB,EADF,cAEE,qCACE,cAAO,OAAO,CAAC,MAAf,uBACE,cACE,IAAI,CAAC,WADP,CAEE,IAAI,CAAC,MAFP,CAGE,cAAY,kBAHd,CAIE,QAAQ,CAAG,KAAKQ,YAJlB,CAKE,KAAK,CAAGJ,SALV,CAME,WAAW,CAAC,uBANd,EADF,EADF,cAWE,eACE,IAAI,CAAC,QADP,CAEE,cAAY,qBAFd,CAGE,OAAO,CAAG,KAAKW,SAHjB,CAIE,QAAQ,CAAGV,gBAJb,oBAXF,GAFF,GADF,CA0BA,mBACE,aAAK,SAAS,CAAC,YAAf,WACIC,SAAS,cAAG,KAAC,OAAD,EACZ,MAAM,CAAG,KADG,CAEZ,SAAS,CAAC,oBAFE,CAGZ,CAAC,KAHW,EAAH,CAINU,IALP,CAOIT,gBAAgB,eAAI,KAAC,QAAD,EAAU,EAAE,CAAC,SAAb,EAPxB,GADF,CAYD,C,mBA7EiBX,S,EAgFpB,cAAeM,MAAf"},"metadata":{},"sourceType":"module"}